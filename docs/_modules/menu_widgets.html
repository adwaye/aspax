

<!DOCTYPE html>
<html class="writer-html5" lang="python" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>menu_widgets &mdash; aspax Annotator 0.0.14 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/style.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> aspax Annotator
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <!-- Local TOC -->
              <div class="local-toc"></div>
            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">aspax Annotator</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">Module code</a> &raquo;</li>
        
      <li>menu_widgets</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for menu_widgets</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">shutil</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">PyQt5</span> <span class="kn">import</span> <span class="n">QtWidgets</span>
<span class="kn">from</span> <span class="nn">PyQt5.QtWidgets</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">PyQt5.QtGui</span> <span class="kn">import</span> <span class="n">QIcon</span><span class="p">,</span><span class="n">QColor</span><span class="p">,</span><span class="n">QPalette</span><span class="p">,</span><span class="n">QFont</span><span class="p">,</span><span class="n">QPixmap</span><span class="p">,</span><span class="n">QPainter</span><span class="p">,</span><span class="n">QPen</span><span class="p">,</span><span class="n">QImage</span><span class="p">,</span><span class="n">QTransform</span><span class="p">,</span><span class="n">QPolygon</span><span class="p">,</span><span class="n">QBrush</span><span class="p">,</span>\
    <span class="n">QPolygonF</span><span class="p">,</span> <span class="n">QPalette</span><span class="p">,</span> <span class="n">QGradient</span><span class="p">,</span> <span class="n">QLinearGradient</span>
<span class="kn">from</span> <span class="nn">PyQt5.QtCore</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">pydicom</span>

<span class="kn">from</span> <span class="nn">extra_widgets</span> <span class="kn">import</span> <span class="n">LabeledSlider</span>






<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="kn">import</span> <span class="nn">csv</span>





<span class="c1"># from DataUtils import *</span>





<div class="viewcode-block" id="DistanceMenuWidget"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.DistanceMenuWidget">[docs]</a><span class="k">class</span> <span class="nc">DistanceMenuWidget</span><span class="p">(</span><span class="n">QWidget</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Base class for menu widgets to be used in the main aspax program. allows the user to process</span>

<span class="sd">    :param joint_list: list of labels to be used to annotate xrays</span>
<span class="sd">    :type joint_list: list</span>
<span class="sd">    :param name: name of the object.</span>
<span class="sd">    :type name: string</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">joint_list</span><span class="p">,</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Distance&#39;</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">DistanceMenuWidget</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font_header</span> <span class="o">=</span> <span class="n">QFont</span><span class="p">(</span><span class="s1">&#39;Android Roboto&#39;</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font_subheader</span> <span class="o">=</span> <span class="n">QFont</span><span class="p">(</span><span class="s1">&#39;Android Roboto&#39;</span><span class="p">,</span> <span class="mi">13</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font_text</span> <span class="o">=</span> <span class="n">QFont</span><span class="p">(</span><span class="s1">&#39;Android Roboto&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font_button</span> <span class="o">=</span> <span class="n">QFont</span><span class="p">(</span><span class="s1">&#39;Android Roboto&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span>      <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">text_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">joint_list</span><span class="p">,</span><span class="s2">&quot;r&quot;</span><span class="p">)</span>
            <span class="n">lines</span> <span class="o">=</span> <span class="n">text_file</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
            <span class="n">text_file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
            <span class="n">lines</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;MCP1&#39;</span><span class="p">,</span><span class="s1">&#39;MC1&#39;</span><span class="p">,</span><span class="s1">&#39;MC2&#39;</span><span class="p">,</span><span class="s1">&#39;MC3&#39;</span><span class="p">,</span><span class="s1">&#39;MC4&#39;</span><span class="p">,</span><span class="s1">&#39;MC5&#39;</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">bones_joints_list</span> <span class="o">=</span> <span class="n">lines</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="p">)</span>


<div class="viewcode-block" id="DistanceMenuWidget.init"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.DistanceMenuWidget.init">[docs]</a>    <span class="k">def</span> <span class="nf">init</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialises the layout of the widget</span>

<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">init_output</span><span class="p">()</span> <span class="c1">#output box for distance- has a qlineitem and aqpushbutton(&#39;Measure)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">init_side_buttons</span><span class="p">()</span> <span class="c1">#initialises panel with R L N/A</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">init_label_selection</span><span class="p">()</span> <span class="c1">#initialises qlineedit for the joint/bone selection</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">init_save_discard</span><span class="p">()</span> <span class="c1">#initialises the buttons for the save and discard methods</span></div>

<div class="viewcode-block" id="DistanceMenuWidget.init_output"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.DistanceMenuWidget.init_output">[docs]</a>    <span class="k">def</span> <span class="nf">init_output</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Creates a Qwidget that has a box and a qpushbutton(&#39;Measure)</span>

<span class="sd">        :return:</span>
<span class="sd">        :rtype:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output_box_layout</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output_box_layout</span><span class="o">.</span><span class="n">setContentsMargins</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output_box</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">()</span>
        <span class="c1"># self.output_box = BoxDistanceArea()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output_box</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;0mm&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output_box</span><span class="o">.</span><span class="n">setMaximumSize</span><span class="p">(</span><span class="mi">240</span><span class="o">+</span><span class="mi">70</span><span class="o">+</span><span class="mi">30</span><span class="p">,</span><span class="mi">30</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output_box</span><span class="o">.</span><span class="n">setMinimumSize</span><span class="p">(</span><span class="mi">240</span><span class="o">+</span><span class="mi">70</span><span class="o">+</span><span class="mi">30</span><span class="p">,</span><span class="mi">30</span><span class="p">)</span>
        <span class="c1"># self.output_box.add_to_layout(self.output_box_layout)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output_box_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">output_box</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">output_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Measure&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output_button</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s2">&quot;background-color: #666666; color: white&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output_button</span><span class="o">.</span><span class="n">setFont</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">font_button</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output_button</span><span class="o">.</span><span class="n">setMaximumSize</span><span class="p">(</span><span class="mi">130</span><span class="p">,</span><span class="mi">30</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output_button</span><span class="o">.</span><span class="n">setMinimumSize</span><span class="p">(</span><span class="mi">130</span><span class="p">,</span><span class="mi">30</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">output_box_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">output_button</span><span class="p">)</span>
        <span class="n">hspacer</span> <span class="o">=</span> <span class="n">QSpacerItem</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span>
                              <span class="n">QSizePolicy</span><span class="o">.</span><span class="n">Expanding</span><span class="p">,</span><span class="n">QSizePolicy</span><span class="o">.</span><span class="n">Minimum</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output_box_layout</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">hspacer</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">output_box_widget</span> <span class="o">=</span> <span class="n">QWidget</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output_box_widget</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">output_box_layout</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">output_box_widget</span><span class="p">)</span></div>

<div class="viewcode-block" id="DistanceMenuWidget.init_side_buttons"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.DistanceMenuWidget.init_side_buttons">[docs]</a>    <span class="k">def</span> <span class="nf">init_side_buttons</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Creates a widget with buttons R L N/A</span>

<span class="sd">        :return:</span>
<span class="sd">        :rtype:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">side_buttons_layout</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">side_button_group</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">side_buttons</span> <span class="o">=</span> <span class="n">make_buttons_from_list</span><span class="p">(</span><span class="n">titles</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;L&#39;</span><span class="p">,</span><span class="s1">&#39;R&#39;</span><span class="p">,</span><span class="s1">&#39;N/A&#39;</span><span class="p">])</span>

        <span class="k">for</span> <span class="n">button</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">side_buttons</span><span class="p">:</span>
            <span class="c1"># button.setStyleSheet(&quot;background-color: #999999; color: white&quot;)</span>
            <span class="n">button</span><span class="o">.</span><span class="n">setFont</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">font_button</span><span class="p">)</span>
            <span class="n">button</span><span class="o">.</span><span class="n">setMaximumSize</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="mi">30</span><span class="p">)</span>
            <span class="n">button</span><span class="o">.</span><span class="n">setMinimumSize</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="mi">30</span><span class="p">)</span>
            <span class="n">button</span><span class="o">.</span><span class="n">setCheckable</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="c1"># button.setAutoExclusive(True)</span>
            <span class="n">button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_text</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">side_buttons</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">side_buttons_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">button</span><span class="p">,</span><span class="n">alignment</span><span class="o">=</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignLeft</span><span class="p">)</span>

        <span class="n">hspacer</span> <span class="o">=</span> <span class="n">QSpacerItem</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span>
            <span class="n">QSizePolicy</span><span class="o">.</span><span class="n">Expanding</span><span class="p">,</span><span class="n">QSizePolicy</span><span class="o">.</span><span class="n">Minimum</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">side_buttons_layout</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">hspacer</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">side_buttons_layout</span><span class="o">.</span><span class="n">addSpacing</span><span class="p">(</span><span class="mi">267</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">side_buttons_layout</span><span class="p">)</span></div>

<div class="viewcode-block" id="DistanceMenuWidget.init_label_selection"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.DistanceMenuWidget.init_label_selection">[docs]</a>    <span class="k">def</span> <span class="nf">init_label_selection</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialises a qlineedit containing the choices for the area being delineated</span>
<span class="sd">        :return:</span>
<span class="sd">        :rtype:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">line_edit_labels</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">line_edit_labels</span><span class="o">.</span><span class="n">setFont</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">font_text</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">line_edit_labels</span><span class="o">.</span><span class="n">setTextMargins</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">line_edit_labels</span><span class="o">.</span><span class="n">setPlaceholderText</span><span class="p">(</span><span class="s2">&quot;Start typing bone or joint name&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">line_edit_labels</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span>
            <span class="s2">&quot;background-color: #f2f2f2; color: black; border-style: solid; border-width: 1px; border-color: #BFBFBF&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">line_edit_labels</span><span class="o">.</span><span class="n">setMaximumSize</span><span class="p">(</span><span class="mi">270</span><span class="p">,</span><span class="mi">30</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">line_edit_labels</span><span class="o">.</span><span class="n">setMinimumSize</span><span class="p">(</span><span class="mi">270</span><span class="p">,</span><span class="mi">30</span><span class="p">)</span>

        <span class="n">completer</span> <span class="o">=</span> <span class="n">QCompleter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bones_joints_list</span><span class="p">)</span>
        <span class="n">completer</span><span class="o">.</span><span class="n">setCaseSensitivity</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">line_edit_labels</span><span class="o">.</span><span class="n">setCompleter</span><span class="p">(</span><span class="n">completer</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">line_edit_labels</span><span class="p">)</span></div>

<div class="viewcode-block" id="DistanceMenuWidget.init_save_discard"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.DistanceMenuWidget.init_save_discard">[docs]</a>    <span class="k">def</span> <span class="nf">init_save_discard</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialises the Qpushbutton for save and discarding</span>

<span class="sd">        :return:</span>
<span class="sd">        :rtype:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_discard_layout</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">hspacer</span> <span class="o">=</span> <span class="n">QSpacerItem</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span>
                              <span class="n">QSizePolicy</span><span class="o">.</span><span class="n">Expanding</span><span class="p">,</span><span class="n">QSizePolicy</span><span class="o">.</span><span class="n">Minimum</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_discard_layout</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">hspacer</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">save_button</span> <span class="o">=</span> <span class="n">SaveButton</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_discard_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">save_button</span><span class="p">,</span><span class="n">alignment</span><span class="o">=</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignRight</span><span class="p">)</span>
        <span class="c1"># self.save_button.add_to_layout(self.save_discard_layout)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unsure_button</span> <span class="o">=</span> <span class="n">SaveButton</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Unsure&quot;</span><span class="p">)</span>
        <span class="c1"># self.unsure_button.add_to_layout(self.save_discard_layout)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_discard_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">unsure_button</span><span class="p">,</span><span class="n">alignment</span><span class="o">=</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignRight</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">discard_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;X&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">discard_button</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s2">&quot;background-color: #FF6666; color: white&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">discard_button</span><span class="o">.</span><span class="n">setFont</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">font_button</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">discard_button</span><span class="o">.</span><span class="n">setMaximumSize</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="mi">30</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">discard_button</span><span class="o">.</span><span class="n">setMinimumSize</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="mi">30</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_discard_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">discard_button</span><span class="p">,</span><span class="n">alignment</span><span class="o">=</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignRight</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_discard_widget</span> <span class="o">=</span> <span class="n">QWidget</span><span class="p">()</span>


        <span class="bp">self</span><span class="o">.</span><span class="n">save_discard_widget</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">save_discard_layout</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">save_discard_widget</span><span class="p">)</span></div>

<div class="viewcode-block" id="DistanceMenuWidget.get_text"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.DistanceMenuWidget.get_text">[docs]</a>    <span class="k">def</span> <span class="nf">get_text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">buttons</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the text on the button that is checked from a list of autoexclusive qpushbuttons</span>

<span class="sd">        :param buttons: Autoexlusive buttons</span>
<span class="sd">        :type buttons:</span>
<span class="sd">        :return:</span>
<span class="sd">        :rtype:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">for</span> <span class="n">button</span> <span class="ow">in</span> <span class="n">buttons</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">button</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
                <span class="n">text</span> <span class="o">=</span> <span class="n">button</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">text</span></div></div>


<div class="viewcode-block" id="AreaMenuWidget"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.AreaMenuWidget">[docs]</a><span class="k">class</span> <span class="nc">AreaMenuWidget</span><span class="p">(</span><span class="n">DistanceMenuWidget</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Widget containing the tabs for selecting the label of annotations being drawn. The widget allows the user to</span>
<span class="sd">    select the type of anatomical structure being annotated, the name of the annotation and the side of the body</span>
<span class="sd">    where this structure is found.</span>

<span class="sd">    :param joint_list: list of joints to be passed to the dropdown containing the choice of joints to annotate</span>
<span class="sd">    :type joint_list:</span>
<span class="sd">    :param name: name of the widget, not much importance</span>
<span class="sd">    :type name: str</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">joint_list</span><span class="p">,</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Area&#39;</span><span class="p">):</span>


        <span class="nb">super</span><span class="p">(</span><span class="n">AreaMenuWidget</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span><span class="n">joint_list</span><span class="o">=</span><span class="n">joint_list</span><span class="p">)</span>

<div class="viewcode-block" id="AreaMenuWidget.init"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.AreaMenuWidget.init">[docs]</a>    <span class="k">def</span> <span class="nf">init</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">init_output</span><span class="p">()</span> <span class="c1">#output box for Area- has a qlineitem and aqpushbutton(&#39;Measure)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">init_annotation_type</span><span class="p">()</span> <span class="c1">#initialises buttons for choice of bone/tissue/joint/other</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">init_side_buttons</span><span class="p">()</span> <span class="c1">#initialises panel with R L N/A</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">init_label_selection</span><span class="p">()</span> <span class="c1">#initialises qlineedit for the joint/bone selection</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">init_save_discard</span><span class="p">()</span> <span class="c1">#initialises the buttons for the save and discard methods</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">init_table_view</span><span class="p">()</span></div>


<div class="viewcode-block" id="AreaMenuWidget.init_save_discard"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.AreaMenuWidget.init_save_discard">[docs]</a>    <span class="k">def</span> <span class="nf">init_save_discard</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">save_discard_layout</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">hspacer</span> <span class="o">=</span> <span class="n">QSpacerItem</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span>
                              <span class="n">QSizePolicy</span><span class="o">.</span><span class="n">Expanding</span><span class="p">,</span><span class="n">QSizePolicy</span><span class="o">.</span><span class="n">Minimum</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_discard_layout</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">hspacer</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">save_button</span> <span class="o">=</span> <span class="n">SaveButton</span><span class="p">()</span>
        <span class="c1"># self.save_button.add_to_layout(self.save_discard_layout)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_discard_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">save_button</span><span class="p">,</span><span class="n">alignment</span><span class="o">=</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignRight</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unsure_button</span> <span class="o">=</span> <span class="n">SaveButton</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Unsure&quot;</span><span class="p">)</span>
        <span class="c1"># self.unsure_button.add_to_layout(self.save_discard_layout)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_discard_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">unsure_button</span><span class="p">,</span><span class="n">alignment</span><span class="o">=</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignRight</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">view_button</span> <span class="o">=</span> <span class="n">SaveButton</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;View&quot;</span><span class="p">)</span>
        <span class="c1"># self.view_button.add_to_layout(self.save_discard_layout)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_discard_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view_button</span><span class="p">,</span><span class="n">alignment</span><span class="o">=</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignRight</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">discard_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;X&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">discard_button</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s2">&quot;background-color: #FF6666; color: white&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">discard_button</span><span class="o">.</span><span class="n">setFont</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">font_button</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">discard_button</span><span class="o">.</span><span class="n">setMaximumSize</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="mi">30</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">discard_button</span><span class="o">.</span><span class="n">setMinimumSize</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="mi">30</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_discard_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">discard_button</span><span class="p">,</span><span class="n">alignment</span><span class="o">=</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignRight</span><span class="p">)</span>
        <span class="c1"># hspacer = QSpacerItem(30,30,</span>
        <span class="c1">#                       QSizePolicy.Expanding,QSizePolicy.Minimum)</span>
        <span class="c1"># self.save_discard_layout.addItem(hspacer)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_discard_widget</span> <span class="o">=</span> <span class="n">QWidget</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_discard_widget</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">save_discard_layout</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">save_discard_widget</span><span class="p">)</span></div>

<div class="viewcode-block" id="AreaMenuWidget.init_annotation_type"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.AreaMenuWidget.init_annotation_type">[docs]</a>    <span class="k">def</span> <span class="nf">init_annotation_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialises buttons that allow to choose between Joint bone tissue other</span>
<span class="sd">        :return:</span>
<span class="sd">        :rtype:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">annotation_type_layout</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">annotation_button_group</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">annotation_type_buttons</span> <span class="o">=</span> <span class="n">make_buttons_from_list</span><span class="p">(</span><span class="n">titles</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Joint&#39;</span><span class="p">,</span><span class="s1">&#39;Bone&#39;</span><span class="p">,</span>
                                                                                                 <span class="s1">&#39;Tissue&#39;</span><span class="p">,</span>
                                                                                        <span class="s1">&#39;Phantom&#39;</span><span class="p">,</span><span class="s1">&#39;Landmark&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">annotation_type_buttons</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">button</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">annotation_type_buttons</span><span class="p">:</span>
            <span class="n">button</span><span class="o">.</span><span class="n">setFont</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">font_button</span><span class="p">)</span>
            <span class="n">button</span><span class="o">.</span><span class="n">setMaximumSize</span><span class="p">(</span><span class="mi">80</span><span class="p">,</span><span class="mi">30</span><span class="p">)</span>
            <span class="n">button</span><span class="o">.</span><span class="n">setMinimumSize</span><span class="p">(</span><span class="mi">80</span><span class="p">,</span><span class="mi">30</span><span class="p">)</span>
            <span class="n">button</span><span class="o">.</span><span class="n">setCheckable</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="c1"># button.setAutoExclusive(True)</span>
            <span class="n">button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_label_name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">annotation_type_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">button</span><span class="p">,</span><span class="n">alignment</span><span class="o">=</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignLeft</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">button</span><span class="o">.</span><span class="n">text</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;Bone&#39;</span><span class="p">:</span>
                <span class="n">button</span><span class="o">.</span><span class="n">toggle</span><span class="p">()</span>

        <span class="c1"># self.annotation_type_layout.addSpacing(90)</span>
        <span class="n">hspacer</span> <span class="o">=</span> <span class="n">QSpacerItem</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span>
                              <span class="n">QSizePolicy</span><span class="o">.</span><span class="n">Expanding</span><span class="p">,</span><span class="n">QSizePolicy</span><span class="o">.</span><span class="n">Minimum</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">annotation_type_layout</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">hspacer</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">annotation_type_layout</span><span class="p">)</span></div>

<div class="viewcode-block" id="AreaMenuWidget.get_label_name"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.AreaMenuWidget.get_label_name">[docs]</a>    <span class="k">def</span> <span class="nf">get_label_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">limb_type</span>     <span class="o">=</span> <span class="s1">&#39;H&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">side_name</span>     <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_text</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">side_buttons</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">organ_name</span>    <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_text</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">annotation_type_buttons</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">suborgan_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">line_edit_labels</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">extension_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">side_name</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">limb_type</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">suborgan_name</span>
        <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">extension_name</span><span class="p">)</span></div>


<div class="viewcode-block" id="AreaMenuWidget.init_table_view"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.AreaMenuWidget.init_table_view">[docs]</a>    <span class="k">def</span> <span class="nf">init_table_view</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">table_layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tableView</span> <span class="o">=</span> <span class="n">QTableView</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tableView</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;tableView&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tableView_lineEdit</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tableView_lineEdit</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;lineEdit&quot;</span><span class="p">)</span>
        <span class="c1"># self.tableView.setMinimumHeight(300)</span>
        <span class="n">table_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tableView_lineEdit</span><span class="p">)</span>
        <span class="n">table_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tableView</span><span class="p">)</span>
        <span class="n">table_widget</span> <span class="o">=</span> <span class="n">QWidget</span><span class="p">()</span>
        <span class="n">table_widget</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">table_layout</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">table_widget</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">create_table_view</span><span class="p">()</span></div>
        <span class="c1"># iris = sns.load_dataset(&#39;iris&#39;)</span>
        <span class="c1"># iris_df = pd.DataFrame(iris)</span>
        <span class="c1"># model = DataFrameModel(iris)</span>
        <span class="c1"># self.tableView.setModel(model)</span>

<div class="viewcode-block" id="AreaMenuWidget.create_table_view"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.AreaMenuWidget.create_table_view">[docs]</a>    <span class="k">def</span> <span class="nf">create_table_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">my_dict</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">my_dict</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">row_index</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span><span class="o">+</span><span class="s1">&#39;_&#39;</span><span class="o">+</span><span class="n">side</span> <span class="k">for</span> <span class="n">side</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;L&#39;</span><span class="p">,</span><span class="s1">&#39;R&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span>
                         <span class="bp">self</span><span class="o">.</span><span class="n">bones_joints_list</span><span class="p">]</span>

            <span class="n">my_dict</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">my_dict</span><span class="p">[</span><span class="s1">&#39;Area Name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">row_index</span>
            <span class="n">my_dict</span><span class="p">[</span><span class="s1">&#39;Completed&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">row_index</span><span class="p">))</span>
            <span class="n">my_dict</span><span class="p">[</span><span class="s1">&#39;Not Completed&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">row_index</span><span class="p">))</span>
            <span class="n">my_dict</span><span class="p">[</span><span class="s1">&#39;Unsure&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">row_index</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">load_table_view</span><span class="p">(</span><span class="n">my_dict</span><span class="p">)</span></div>



<div class="viewcode-block" id="AreaMenuWidget.load_table_view"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.AreaMenuWidget.load_table_view">[docs]</a>    <span class="k">def</span> <span class="nf">load_table_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">dataframe</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Displays the information stored in the dictionary given by dataframe and displays it in the tableView</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># model = DataFrameModel(dataframe)</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">StatusTableModel</span><span class="p">(</span><span class="n">dataframe</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tableView</span><span class="o">.</span><span class="n">setModel</span><span class="p">(</span><span class="n">model</span><span class="p">)</span></div>
        <span class="c1">#self.tableView.update()</span>

<div class="viewcode-block" id="AreaMenuWidget.save_table_view"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.AreaMenuWidget.save_table_view">[docs]</a>    <span class="k">def</span> <span class="nf">save_table_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">file_loc</span><span class="p">):</span>
        <span class="n">dataframe</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tableView</span><span class="o">.</span><span class="n">model</span><span class="p">()</span><span class="o">.</span><span class="n">_data</span>
        <span class="k">for</span> <span class="n">keys</span><span class="p">,</span><span class="n">val</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">keys</span><span class="p">)</span>

        <span class="n">save_csv</span><span class="p">(</span><span class="n">dataframe</span><span class="p">,</span><span class="n">fileName</span><span class="o">=</span><span class="n">file_loc</span><span class="p">)</span></div>


<div class="viewcode-block" id="AreaMenuWidget.update_table_view"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.AreaMenuWidget.update_table_view">[docs]</a>    <span class="k">def</span> <span class="nf">update_table_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">row_name</span><span class="p">,</span><span class="n">signal</span><span class="p">,</span><span class="n">save_loc</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;signal needs to be save or unsure and is handled by the main class</span>

<span class="sd">        :param row_name: Name of the bone being annotated</span>
<span class="sd">        :param signal:   Should be wither &#39;Completed&#39;, &#39;Not Completed&#39;, &#39;Unsure&#39;, name of the column to be assigned the value of 1</span>
<span class="sd">        :save_loc</span>
<span class="sd">        :return:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tableView</span><span class="o">.</span><span class="n">model</span><span class="p">()</span><span class="o">.</span><span class="n">_data</span>
        <span class="nb">id</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Area Name&#39;</span><span class="p">])</span> <span class="o">==</span> <span class="n">row_name</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">keys</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">keys</span> <span class="o">!=</span> <span class="s1">&#39;Area Name&#39;</span><span class="p">:</span>

                    <span class="n">val</span><span class="p">[</span><span class="nb">id</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="mf">0.0</span>
                    <span class="n">df</span><span class="p">[</span><span class="n">keys</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>


            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Signal form button is &quot;</span> <span class="o">+</span><span class="n">signal</span><span class="p">)</span>
            <span class="n">state_array</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">signal</span><span class="p">]</span>
            <span class="nb">id</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Area Name&#39;</span><span class="p">])</span> <span class="o">==</span> <span class="n">row_name</span><span class="p">)</span>
            <span class="n">state_array</span><span class="p">[</span><span class="nb">id</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="mf">1.0</span>
            <span class="n">df</span><span class="p">[</span><span class="n">signal</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">state_array</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">load_table_view</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
            <span class="c1">#todo: need to have a way to add the save_loc to the table: this needs to be set when loading an xray</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;no need to update this&quot;</span><span class="p">)</span></div></div>



<div class="viewcode-block" id="ScoreMenuWidget"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.ScoreMenuWidget">[docs]</a><span class="k">class</span> <span class="nc">ScoreMenuWidget</span><span class="p">(</span><span class="n">DistanceMenuWidget</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Widget containing the sliders to assign scores to different anatomical structures.</span>

<span class="sd">    :param profile: dictionary having keys &#39;damage_types&#39;, &#39;damage_scores&#39; and damage areas which contains</span>
<span class="sd">    information on the</span>
<span class="sd">    type of</span>
<span class="sd">    damage and the score range of each type of damage. This determines the name and range attached to each slider in</span>
<span class="sd">    as well as the anatomical features present in the dropdown menu.</span>
<span class="sd">    the class. The</span>
<span class="sd">    :type profile: dictionary</span>
<span class="sd">    :param name: name of the widget, not much importance</span>
<span class="sd">    :type name: str</span>

<span class="sd">    **Example**:</span>
<span class="sd">    &gt;&gt;&gt; my_profile = {&#39;damage_types&#39;:[&#39;Destruction&#39;,&#39;Proliferation&#39;],&#39;damage_scores&#39;:[(0,5),(0,5)],&#39;damage_areas&#39;:[&#39;IP,DIP&#39;]}</span>
<span class="sd">    &gt;&gt;&gt; score_menu = ScoreMenuWidget(profile=my_profile)</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Score&#39;</span><span class="p">,</span><span class="n">profile</span><span class="o">=</span><span class="p">{}):</span>
        <span class="c1"># print(&quot;-----------------&quot;)</span>
        <span class="c1"># print(profile)</span>
        <span class="c1"># print(&quot;-----------------&quot;)</span>
        <span class="n">damage_types</span>         <span class="o">=</span> <span class="n">profile</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;damage_types&#39;</span><span class="p">,[</span><span class="s1">&#39;Destruction&#39;</span><span class="p">,</span><span class="s1">&#39;Proliferation&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">damage_types</span>    <span class="o">=</span> <span class="n">damage_types</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">damage_types</span><span class="p">)</span> <span class="ow">is</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">damage_types</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">damage_types</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
        <span class="n">damage_ranges</span>        <span class="o">=</span> <span class="n">profile</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;damage_scores&#39;</span><span class="p">,[(</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">),(</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">)])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">damage_ranges</span>   <span class="o">=</span> <span class="n">damage_ranges</span>
        <span class="n">score_technique</span>      <span class="o">=</span> <span class="n">profile</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;score_technique&#39;</span><span class="p">,</span><span class="s1">&#39;Ratingen&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">score_technique</span> <span class="o">=</span> <span class="n">score_technique</span>

        <span class="n">damage_areas</span>        <span class="o">=</span> <span class="n">profile</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;damage_areas&#39;</span><span class="p">,[</span><span class="s2">&quot;IP&quot;</span><span class="p">,</span> <span class="s2">&quot;DIP2&quot;</span><span class="p">,</span> <span class="s2">&quot;DIP3&quot;</span><span class="p">,</span> <span class="s2">&quot;DIP4&quot;</span><span class="p">,</span> <span class="s2">&quot;DIP5&quot;</span><span class="p">,</span> <span class="s2">&quot;PIP2&quot;</span><span class="p">,</span> <span class="s2">&quot;PIP3&quot;</span><span class="p">,</span> <span class="s2">&quot;PIP4&quot;</span><span class="p">,</span> <span class="s2">&quot;PIP5&quot;</span><span class="p">,</span> <span class="s2">&quot;MCP1&quot;</span><span class="p">,</span> <span class="s2">&quot;MCP2&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;MCP3&quot;</span><span class="p">,</span> <span class="s2">&quot;MCP4&quot;</span><span class="p">,</span> <span class="s2">&quot;MCP5&quot;</span><span class="p">,</span><span class="s2">&quot;WRIST&quot;</span><span class="p">])</span>


        <span class="bp">self</span><span class="o">.</span><span class="n">damage_areas</span>    <span class="o">=</span> <span class="n">damage_areas</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">damage_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">ScoreMenuWidget</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span><span class="n">joint_list</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>


<div class="viewcode-block" id="ScoreMenuWidget.init"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.ScoreMenuWidget.init">[docs]</a>    <span class="k">def</span> <span class="nf">init</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">init_side_buttons</span><span class="p">()</span> <span class="c1">#initialises panel with R L N/A</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">init_label_selection</span><span class="p">()</span> <span class="c1">#initialises qcombobox for the joint/bone selection</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">init_score_slider</span><span class="p">()</span> <span class="c1">#initialises the score sliders for dsicrete scales</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">init_save_discard</span><span class="p">()</span> <span class="c1">##initialises the buttons for the save and discard methods</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">init_table_view</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect_buttons</span><span class="p">()</span></div>

<div class="viewcode-block" id="ScoreMenuWidget.init_score_slider"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.ScoreMenuWidget.init_score_slider">[docs]</a>    <span class="k">def</span> <span class="nf">init_score_slider</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">score_slider_layout</span> <span class="o">=</span> <span class="n">score_sliders</span><span class="p">(</span><span class="n">score_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">score_technique</span><span class="p">,</span><span class="n">damage_types</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">damage_types</span><span class="p">,</span>
                                            <span class="n">damage_ranges</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">damage_ranges</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">score_slider_layout</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">score_sliders</span> <span class="o">=</span> <span class="n">score_slider_layout</span><span class="o">.</span><span class="n">sliders</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span><span class="n">val</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">score_sliders</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="c1">#val.sliderMoved[int].connect(self.save_slider_value())</span>
            <span class="c1"># val.valueChanged[int].connect(self.store_slider_value)</span>
            <span class="n">val</span><span class="o">.</span><span class="n">sliderReleased</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">store_slider_value</span><span class="p">)</span></div>
            <span class="c1"># val.mousePressEvent.connect(self.store_slider_value)</span>



<div class="viewcode-block" id="ScoreMenuWidget.init_label_selection"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.ScoreMenuWidget.init_label_selection">[docs]</a>    <span class="k">def</span> <span class="nf">init_label_selection</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">label_layout</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">score_technique_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">score_technique</span><span class="o">+</span><span class="s1">&#39; on&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">score_technique_label</span><span class="o">.</span><span class="n">setFont</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">font_text</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">score_area_box</span> <span class="o">=</span> <span class="n">QComboBox</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">score_area_box</span><span class="o">.</span><span class="n">setFont</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">font_text</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">score_area_box</span><span class="o">.</span><span class="n">setContentsMargins</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">score_area_box</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span>
            <span class="s2">&quot;background-color: #f2f2f2; color: black; border-style: solid; border-width: 1px; border-color: &quot;</span>
            <span class="s2">&quot;#BFBFBF&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">score_area_box</span><span class="o">.</span><span class="n">setMaximumSize</span><span class="p">(</span><span class="mi">300</span><span class="p">,</span><span class="mi">30</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">score_area_box</span><span class="o">.</span><span class="n">setMinimumSize</span><span class="p">(</span><span class="mi">300</span><span class="p">,</span><span class="mi">30</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">score_area_box</span><span class="o">.</span><span class="n">addItems</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">damage_areas</span><span class="p">)</span>

        <span class="n">label_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">score_technique_label</span><span class="p">)</span>
        <span class="n">label_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">score_area_box</span><span class="p">)</span>
        <span class="n">hspacer</span> <span class="o">=</span> <span class="n">QSpacerItem</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span>
            <span class="n">QSizePolicy</span><span class="o">.</span><span class="n">Expanding</span><span class="p">,</span><span class="n">QSizePolicy</span><span class="o">.</span><span class="n">Minimum</span><span class="p">)</span>
        <span class="n">label_layout</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">hspacer</span><span class="p">)</span>
        <span class="n">label_widget</span> <span class="o">=</span> <span class="n">QWidget</span><span class="p">()</span>
        <span class="n">label_widget</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">label_layout</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">label_widget</span><span class="p">)</span></div>

<div class="viewcode-block" id="ScoreMenuWidget.init_table_view"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.ScoreMenuWidget.init_table_view">[docs]</a>    <span class="k">def</span> <span class="nf">init_table_view</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialises the layout holding the table that summarises the features scored so far. Calls</span>
<span class="sd">        self.create_table_view to populate the layout with a table of score values.</span>

<span class="sd">        :return:</span>
<span class="sd">        :rtype:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">table_layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tableView</span> <span class="o">=</span> <span class="n">QTableView</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tableView</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;tableView&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tableView_lineEdit</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tableView_lineEdit</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;lineEdit&quot;</span><span class="p">)</span>
        <span class="c1"># self.tableView.setMinimumHeight(300)</span>
        <span class="n">table_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tableView_lineEdit</span><span class="p">)</span>
        <span class="n">table_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tableView</span><span class="p">)</span>
        <span class="n">table_widget</span> <span class="o">=</span> <span class="n">QWidget</span><span class="p">()</span>
        <span class="n">table_widget</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">table_layout</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">table_widget</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">create_table_view</span><span class="p">()</span></div>
        <span class="c1"># iris = sns.load_dataset(&#39;iris&#39;)</span>
        <span class="c1"># iris_df = pd.DataFrame(iris)</span>
        <span class="c1"># model = DataFrameModel(iris)</span>
        <span class="c1"># self.tableView.setModel(model)</span>

<div class="viewcode-block" id="ScoreMenuWidget.create_table_view"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.ScoreMenuWidget.create_table_view">[docs]</a>    <span class="k">def</span> <span class="nf">create_table_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">my_dict</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Creates a dictionary that will hold the score values and calls self.load_table_view to display this table</span>

<span class="sd">        :param my_dict:</span>
<span class="sd">        :type my_dict:</span>
<span class="sd">        :return:</span>
<span class="sd">        :rtype:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">my_dict</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">row_index</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span><span class="o">+</span><span class="s1">&#39;_&#39;</span><span class="o">+</span><span class="n">side</span> <span class="k">for</span> <span class="n">side</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;L&#39;</span><span class="p">,</span><span class="s1">&#39;R&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span>
                         <span class="bp">self</span><span class="o">.</span><span class="n">damage_areas</span><span class="p">]</span>

            <span class="n">my_dict</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">my_dict</span><span class="p">[</span><span class="s1">&#39;Joint Name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">row_index</span>
            <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">damage_types</span><span class="p">:</span>
                <span class="n">my_dict</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">row_index</span><span class="p">))</span>


        <span class="bp">self</span><span class="o">.</span><span class="n">load_table_view</span><span class="p">(</span><span class="n">my_dict</span><span class="p">)</span></div>



<div class="viewcode-block" id="ScoreMenuWidget.load_table_view"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.ScoreMenuWidget.load_table_view">[docs]</a>    <span class="k">def</span> <span class="nf">load_table_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">my_dict</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Creates a table_view from the dictionary</span>

<span class="sd">        :param my_dict:</span>
<span class="sd">        :type my_dict:</span>
<span class="sd">        :return:</span>
<span class="sd">        :rtype:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># output</span>
        <span class="c1"># model = DataFrameModel(dataframe)</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">my_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">key</span> <span class="o">!=</span> <span class="s1">&#39;Joint Name&#39;</span><span class="p">:</span>
                <span class="n">val</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">val</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float</span><span class="p">)</span>
                <span class="n">my_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">DictionaryTableModel</span><span class="p">(</span><span class="n">my_dict</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">tableView</span><span class="o">.</span><span class="n">setModel</span><span class="p">(</span><span class="n">model</span><span class="p">)</span></div>


<div class="viewcode-block" id="ScoreMenuWidget.save_table_view"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.ScoreMenuWidget.save_table_view">[docs]</a>    <span class="k">def</span> <span class="nf">save_table_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">file_loc</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Saves the scores in a csv file.</span>

<span class="sd">        :param file_loc:</span>
<span class="sd">        :type file_loc:</span>
<span class="sd">        :return:</span>
<span class="sd">        :rtype:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">dataframe</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tableView</span><span class="o">.</span><span class="n">model</span><span class="p">()</span><span class="o">.</span><span class="n">_data</span>
        <span class="n">save_csv</span><span class="p">(</span><span class="n">dataframe</span><span class="p">,</span><span class="n">fileName</span><span class="o">=</span><span class="n">file_loc</span><span class="p">)</span></div>

<div class="viewcode-block" id="ScoreMenuWidget.store_slider_value"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.ScoreMenuWidget.store_slider_value">[docs]</a>    <span class="k">def</span> <span class="nf">store_slider_value</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Adds slider values to the tableview</span>

<span class="sd">        :return:</span>
<span class="sd">        :rtype:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">scores</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span><span class="n">val</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">score_sliders</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">scores</span> <span class="o">+=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">val</span><span class="o">.</span><span class="n">value</span><span class="p">())]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scores_bool</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">scores</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">side_button_group</span><span class="o">.</span><span class="n">checkedButton</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>


            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scores_bool</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">popupWindow</span> <span class="o">=</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">question</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="s1">&#39;Warning!&#39;</span><span class="p">,</span>
                                                            <span class="s2">&quot;Please select a side to allocate the score&quot;</span> <span class="p">,</span>
                                                            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">Ok</span><span class="p">)</span>

                <span class="k">for</span> <span class="n">key</span><span class="p">,</span><span class="n">val</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">score_sliders</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="n">val</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                    <span class="n">val</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">keys</span><span class="p">,</span><span class="n">val</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">score_sliders</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">damage_dict</span><span class="p">[</span><span class="n">keys</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">damage_dict</span><span class="p">)</span>
            <span class="c1"># time.sleep(0.5)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_table</span><span class="p">()</span></div>


<div class="viewcode-block" id="ScoreMenuWidget.update_table"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.ScoreMenuWidget.update_table">[docs]</a>    <span class="k">def</span> <span class="nf">update_table</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;updates the table with the values on the sliders</span>

<span class="sd">        :return:</span>
<span class="sd">        :rtype:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">scores</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span><span class="n">val</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">score_sliders</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">scores</span> <span class="o">+=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">val</span><span class="o">.</span><span class="n">value</span><span class="p">())]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scores_bool</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">scores</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>


            <span class="c1">#val.update()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">side_button_group</span><span class="o">.</span><span class="n">checkedButton</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>


            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scores_bool</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">popupWindow</span> <span class="o">=</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">question</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="s1">&#39;Warning!&#39;</span><span class="p">,</span>
                                                            <span class="s2">&quot;Please select a side to allocate the score&quot;</span> <span class="p">,</span>
                                                            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">Ok</span><span class="p">)</span>

                <span class="k">for</span> <span class="n">key</span><span class="p">,</span><span class="n">val</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">score_sliders</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="n">val</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                    <span class="n">val</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>


        <span class="k">else</span><span class="p">:</span>

            <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tableView</span><span class="o">.</span><span class="n">model</span><span class="p">()</span><span class="o">.</span><span class="n">_data</span>

            <span class="k">for</span> <span class="n">keys</span><span class="p">,</span><span class="n">val</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">damage_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">row_name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">score_area_box</span><span class="o">.</span><span class="n">currentText</span><span class="p">())</span><span class="o">+</span><span class="s1">&#39;_&#39;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">side_button_group</span><span class="o">.</span><span class="n">checkedButton</span><span class="p">()</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
                <span class="n">col_name</span> <span class="o">=</span> <span class="n">keys</span>
                <span class="n">score_array</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">col_name</span><span class="p">]</span>
                <span class="nb">id</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Joint Name&#39;</span><span class="p">])</span><span class="o">==</span><span class="n">row_name</span><span class="p">)</span>
                <span class="n">score_array</span><span class="p">[</span><span class="nb">id</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="n">val</span>
                <span class="n">df</span><span class="p">[</span><span class="n">col_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">score_array</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">load_table_view</span><span class="p">(</span><span class="n">df</span><span class="p">)</span></div>


<div class="viewcode-block" id="ScoreMenuWidget.save_slider_value"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.ScoreMenuWidget.save_slider_value">[docs]</a>    <span class="k">def</span> <span class="nf">save_slider_value</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">scores</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span><span class="n">val</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">score_sliders</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">scores</span> <span class="o">+=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">val</span><span class="o">.</span><span class="n">value</span><span class="p">())]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scores_bool</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">scores</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>


            <span class="c1">#val.update()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">side_button_group</span><span class="o">.</span><span class="n">checkedButton</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>


            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scores_bool</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">popupWindow</span> <span class="o">=</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">question</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="s1">&#39;Warning!&#39;</span><span class="p">,</span>
                                                            <span class="s2">&quot;Please select a side to allocate the score&quot;</span> <span class="p">,</span>
                                                            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">Ok</span><span class="p">)</span>

                <span class="k">for</span> <span class="n">key</span><span class="p">,</span><span class="n">val</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">score_sliders</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="n">val</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                    <span class="n">val</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>


        <span class="k">else</span><span class="p">:</span>

            <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tableView</span><span class="o">.</span><span class="n">model</span><span class="p">()</span><span class="o">.</span><span class="n">_data</span>

            <span class="k">for</span> <span class="n">keys</span><span class="p">,</span><span class="n">val</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">score_sliders</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">row_name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">score_area_box</span><span class="o">.</span><span class="n">currentText</span><span class="p">())</span><span class="o">+</span><span class="s1">&#39;_&#39;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">side_button_group</span><span class="o">.</span><span class="n">checkedButton</span><span class="p">()</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
                <span class="n">col_name</span> <span class="o">=</span> <span class="n">keys</span>
                <span class="n">score_array</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">col_name</span><span class="p">]</span>
                <span class="nb">id</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Joint Name&#39;</span><span class="p">])</span><span class="o">==</span><span class="n">row_name</span><span class="p">)</span>
                <span class="n">score_array</span><span class="p">[</span><span class="nb">id</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="n">val</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
                <span class="n">df</span><span class="p">[</span><span class="n">col_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">score_array</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">load_table_view</span><span class="p">(</span><span class="n">df</span><span class="p">)</span></div>

<div class="viewcode-block" id="ScoreMenuWidget.load_slider_value"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.ScoreMenuWidget.load_slider_value">[docs]</a>    <span class="k">def</span> <span class="nf">load_slider_value</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">side_button_group</span><span class="o">.</span><span class="n">checkedButton</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;no side selected&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tableView</span><span class="o">.</span><span class="n">model</span><span class="p">()</span><span class="o">.</span><span class="n">_data</span>

            <span class="k">for</span> <span class="n">key</span><span class="p">,</span><span class="n">val</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">score_sliders</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
                <span class="n">array</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
                <span class="n">row_name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">score_area_box</span><span class="o">.</span><span class="n">currentText</span><span class="p">())</span> <span class="o">+</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">side_button_group</span><span class="o">.</span><span class="n">checkedButton</span><span class="p">()</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
                <span class="nb">id</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Joint Name&#39;</span><span class="p">])</span> <span class="o">==</span> <span class="n">row_name</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">damage_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">array</span><span class="p">[</span><span class="nb">id</span><span class="p">]</span>
        <span class="c1"># time.sleep(0.5)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_sliders</span><span class="p">()</span></div>
                <span class="c1"># val.setValue(array[id])</span>
                <span class="c1"># val.update()</span>

<div class="viewcode-block" id="ScoreMenuWidget.update_sliders"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.ScoreMenuWidget.update_sliders">[docs]</a>    <span class="k">def</span> <span class="nf">update_sliders</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span><span class="n">val</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">score_sliders</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">val</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">damage_dict</span><span class="p">[</span><span class="n">key</span><span class="p">])</span></div>

<div class="viewcode-block" id="ScoreMenuWidget.connect_buttons"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.ScoreMenuWidget.connect_buttons">[docs]</a>    <span class="k">def</span> <span class="nf">connect_buttons</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">button</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">side_buttons</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">button</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">!=</span><span class="s1">&#39;N/A&#39;</span><span class="p">:</span>
                <span class="n">button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">load_slider_value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">score_area_box</span><span class="o">.</span><span class="n">currentTextChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">load_slider_value</span><span class="p">)</span></div></div>



<div class="viewcode-block" id="track_menu_widget"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.track_menu_widget">[docs]</a><span class="k">class</span> <span class="nc">track_menu_widget</span><span class="p">(</span><span class="n">DistanceMenuWidget</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Not currently in use</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Tracking&#39;</span><span class="p">,</span><span class="n">profile</span><span class="o">=</span><span class="p">{}):</span>
        <span class="n">damage_types</span>         <span class="o">=</span> <span class="n">profile</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;damage_types&#39;</span><span class="p">,[</span><span class="s1">&#39;Destruction&#39;</span><span class="p">,</span><span class="s1">&#39;Proliferation&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">damage_types</span>    <span class="o">=</span> <span class="n">damage_types</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">damage_types</span><span class="p">)</span> <span class="ow">is</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">damage_types</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">damage_types</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
        <span class="n">damage_ranges</span>        <span class="o">=</span> <span class="n">profile</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;damage_scores&#39;</span><span class="p">,[(</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">),(</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">)])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">damage_ranges</span>   <span class="o">=</span> <span class="n">damage_ranges</span>
        <span class="n">score_technique</span>      <span class="o">=</span> <span class="n">profile</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;score_technique&#39;</span><span class="p">,</span><span class="s1">&#39;Ratingen&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">score_technique</span> <span class="o">=</span> <span class="n">score_technique</span>
        <span class="n">default_areas</span>        <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;IP&quot;</span><span class="p">,</span> <span class="s2">&quot;DIP2&quot;</span><span class="p">,</span> <span class="s2">&quot;DIP3&quot;</span><span class="p">,</span> <span class="s2">&quot;DIP4&quot;</span><span class="p">,</span> <span class="s2">&quot;DIP5&quot;</span><span class="p">,</span> <span class="s2">&quot;PIP2&quot;</span><span class="p">,</span> <span class="s2">&quot;PIP3&quot;</span><span class="p">,</span> <span class="s2">&quot;PIP4&quot;</span><span class="p">,</span> <span class="s2">&quot;PIP5&quot;</span><span class="p">,</span> <span class="s2">&quot;MCP1&quot;</span><span class="p">,</span> <span class="s2">&quot;MCP2&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;MCP3&quot;</span><span class="p">,</span> <span class="s2">&quot;MCP4&quot;</span><span class="p">,</span> <span class="s2">&quot;MCP5&quot;</span><span class="p">]</span><span class="c1">#todo: expand the score profiles to have the default areas as</span>
        <span class="c1"># well</span>
        <span class="n">damage_areas</span>         <span class="o">=</span> <span class="n">profile</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;damage_areas&#39;</span><span class="p">,</span><span class="n">default_areas</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">damage_areas</span>    <span class="o">=</span> <span class="n">damage_areas</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">ScoreMenuWidget</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>


<div class="viewcode-block" id="track_menu_widget.init"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.track_menu_widget.init">[docs]</a>    <span class="k">def</span> <span class="nf">init</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1">#self.init_side_buttons() #initialises panel with R L N/A</span>
        <span class="c1">#self.init_label_selection() #initialises qcombobox for the joint/bone selection</span>
        <span class="c1">#self.init_score_slider() #initialises the score sliders for dsicrete scales</span>
        <span class="c1">#self.init_save_discard() ##initialises the buttons for the save and discard methods</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">init_table_view</span><span class="p">()</span></div>



<div class="viewcode-block" id="track_menu_widget.init_table_view"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.track_menu_widget.init_table_view">[docs]</a>    <span class="k">def</span> <span class="nf">init_table_view</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">table_layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tableView</span> <span class="o">=</span> <span class="n">QTableView</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tableView</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;tableView&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tableView_lineEdit</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tableView_lineEdit</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;lineEdit&quot;</span><span class="p">)</span>
        <span class="n">table_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tableView_lineEdit</span><span class="p">)</span>
        <span class="n">table_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tableView</span><span class="p">)</span>
        <span class="n">table_widget</span> <span class="o">=</span> <span class="n">QWidget</span><span class="p">()</span>
        <span class="n">table_widget</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">table_layout</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">table_widget</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">create_table_view</span><span class="p">()</span></div>
        <span class="c1"># iris = sns.load_dataset(&#39;iris&#39;)</span>
        <span class="c1"># iris_df = pd.DataFrame(iris)</span>
        <span class="c1"># model = DataFrameModel(iris)</span>
        <span class="c1"># self.tableView.setModel(model)</span>

<div class="viewcode-block" id="track_menu_widget.create_table_view"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.track_menu_widget.create_table_view">[docs]</a>    <span class="k">def</span> <span class="nf">create_table_view</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">row_index</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span><span class="o">+</span><span class="s1">&#39;_&#39;</span><span class="o">+</span><span class="n">side</span> <span class="k">for</span> <span class="n">side</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;L&#39;</span><span class="p">,</span><span class="s1">&#39;R&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span>
                     <span class="bp">self</span><span class="o">.</span><span class="n">damage_areas</span><span class="p">]</span>

        <span class="n">my_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">my_dict</span><span class="p">[</span><span class="s1">&#39;Joint Name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">row_index</span>
        <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">damage_types</span><span class="p">:</span>
            <span class="n">my_dict</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">row_index</span><span class="p">))</span>


        <span class="bp">self</span><span class="o">.</span><span class="n">load_table_view</span><span class="p">(</span><span class="n">my_dict</span><span class="p">)</span></div>



<div class="viewcode-block" id="track_menu_widget.load_table_view"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.track_menu_widget.load_table_view">[docs]</a>    <span class="k">def</span> <span class="nf">load_table_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">dataframe</span><span class="p">):</span>
        <span class="c1"># model = DataFrameModel(dataframe)</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">DictionaryTableModel</span><span class="p">(</span><span class="n">dataframe</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tableView</span><span class="o">.</span><span class="n">setModel</span><span class="p">(</span><span class="n">model</span><span class="p">)</span></div>

<div class="viewcode-block" id="track_menu_widget.save_table_view"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.track_menu_widget.save_table_view">[docs]</a>    <span class="k">def</span> <span class="nf">save_table_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">file_loc</span><span class="p">):</span>
        <span class="n">dataframe</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tableView</span><span class="o">.</span><span class="n">model</span><span class="p">()</span><span class="o">.</span><span class="n">_data</span>
        <span class="n">save_csv</span><span class="p">(</span><span class="n">dataframe</span><span class="p">,</span><span class="n">fileName</span><span class="o">=</span><span class="n">file_loc</span><span class="p">)</span></div>

<div class="viewcode-block" id="track_menu_widget.save_slider_value"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.track_menu_widget.save_slider_value">[docs]</a>    <span class="k">def</span> <span class="nf">save_slider_value</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1">#todo: the popup window here does not disappear right away after resetting the scores</span>
        <span class="n">scores</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span><span class="n">val</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">score_sliders</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">scores</span> <span class="o">+=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">val</span><span class="o">.</span><span class="n">value</span><span class="p">())]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scores_bool</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">scores</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>


            <span class="c1">#val.update()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">side_button_group</span><span class="o">.</span><span class="n">checkedButton</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>


            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scores_bool</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">popupWindow</span> <span class="o">=</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">question</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="s1">&#39;Warning!&#39;</span><span class="p">,</span>
                                                            <span class="s2">&quot;Please select a side to allocate the score&quot;</span> <span class="p">,</span>
                                                            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">Ok</span><span class="p">)</span>

                <span class="k">for</span> <span class="n">key</span><span class="p">,</span><span class="n">val</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">score_sliders</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="n">val</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                    <span class="n">val</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>


        <span class="k">else</span><span class="p">:</span>

            <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tableView</span><span class="o">.</span><span class="n">model</span><span class="p">()</span><span class="o">.</span><span class="n">_data</span>

            <span class="k">for</span> <span class="n">keys</span><span class="p">,</span><span class="n">val</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">score_sliders</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">row_name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">score_area_box</span><span class="o">.</span><span class="n">currentText</span><span class="p">())</span><span class="o">+</span><span class="s1">&#39;_&#39;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">side_button_group</span><span class="o">.</span><span class="n">checkedButton</span><span class="p">()</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
                <span class="n">col_name</span> <span class="o">=</span> <span class="n">keys</span>
                <span class="n">score_array</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">col_name</span><span class="p">]</span>
                <span class="nb">id</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Joint Name&#39;</span><span class="p">])</span><span class="o">==</span><span class="n">row_name</span><span class="p">)</span>
                <span class="n">score_array</span><span class="p">[</span><span class="nb">id</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="n">val</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
                <span class="n">df</span><span class="p">[</span><span class="n">col_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">score_array</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">int</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">load_table_view</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tableView</span><span class="o">.</span><span class="n">color_me</span><span class="p">()</span></div></div>








<div class="viewcode-block" id="label_extraction_menu_widget"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.label_extraction_menu_widget">[docs]</a><span class="k">class</span> <span class="nc">label_extraction_menu_widget</span><span class="p">(</span><span class="n">DistanceMenuWidget</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Not in use</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">label_extraction_menu_widget</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>


<div class="viewcode-block" id="label_extraction_menu_widget.init"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.label_extraction_menu_widget.init">[docs]</a>    <span class="k">def</span> <span class="nf">init</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">init_label_selection</span><span class="p">()</span> <span class="c1">#initialises qlineedit to label the patch being extracted</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">init_extraction_buttons</span><span class="p">()</span> <span class="c1">#initilises buttons extract area mark point</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">init_save_discard</span><span class="p">()</span></div>

<div class="viewcode-block" id="label_extraction_menu_widget.init_label_selection"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.label_extraction_menu_widget.init_label_selection">[docs]</a>    <span class="k">def</span> <span class="nf">init_label_selection</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">qline_label</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">qline_label</span><span class="o">.</span><span class="n">setFont</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">font_text</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">qline_label</span><span class="o">.</span><span class="n">setTextMargins</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">qline_label</span><span class="o">.</span><span class="n">setPlaceholderText</span><span class="p">(</span><span class="s2">&quot;Label extracted patch&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">qline_label</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span>
            <span class="s2">&quot;background-color: #f2f2f2; color: black; border-style: solid; border-width: 1px; border-color: #BFBFBF&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">qline_label</span><span class="o">.</span><span class="n">setMaximumSize</span><span class="p">(</span><span class="mi">270</span><span class="p">,</span><span class="mi">30</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">qline_label</span><span class="o">.</span><span class="n">setMinimumSize</span><span class="p">(</span><span class="mi">270</span><span class="p">,</span><span class="mi">30</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">qline_label</span><span class="p">)</span></div>

<div class="viewcode-block" id="label_extraction_menu_widget.init_extraction_buttons"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.label_extraction_menu_widget.init_extraction_buttons">[docs]</a>    <span class="k">def</span> <span class="nf">init_extraction_buttons</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">buttons_extract_layout</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">extract_area_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Extract area&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">extract_area_button</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s2">&quot;background-color: #999999; color: white&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">extract_area_button</span><span class="o">.</span><span class="n">setFont</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">font_button</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">extract_area_button</span><span class="o">.</span><span class="n">setMaximumSize</span><span class="p">(</span><span class="mi">110</span><span class="p">,</span><span class="mi">30</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">extract_area_button</span><span class="o">.</span><span class="n">setMinimumSize</span><span class="p">(</span><span class="mi">110</span><span class="p">,</span><span class="mi">30</span><span class="p">)</span>
        <span class="c1"># self.extract_area_button_extract.clicked.connect(self.flag_extract_area_button)</span>
        <span class="c1"># self.extract_area_button_extract.clicked.connect(self.button_extract_area_clicked_extract)</span>
        <span class="c1">#self.extract_area_button_extract.clicked.connect(self.draw_extract_rectangle)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">buttons_extract_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">extract_area_button</span><span class="p">,</span><span class="n">alignment</span><span class="o">=</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignLeft</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mark_point_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Mark point&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mark_point_button</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s2">&quot;background-color: #999999; color: white&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mark_point_button</span><span class="o">.</span><span class="n">setFont</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">font_button</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mark_point_button</span><span class="o">.</span><span class="n">setMaximumSize</span><span class="p">(</span><span class="mi">110</span><span class="p">,</span><span class="mi">30</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mark_point_button</span><span class="o">.</span><span class="n">setMinimumSize</span><span class="p">(</span><span class="mi">110</span><span class="p">,</span><span class="mi">30</span><span class="p">)</span>

        <span class="c1"># self.mark_point_button_extract.clicked.connect(self.flag_mark_point_button)</span>
        <span class="c1"># self.mark_point_button_extract.clicked.connect(self.button_mark_point_clicked_extract)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mark_point_button</span><span class="o">.</span><span class="n">setAutoExclusive</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">extract_area_button</span><span class="o">.</span><span class="n">setAutoExclusive</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mark_point_button</span><span class="o">.</span><span class="n">setCheckable</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">extract_area_button</span><span class="o">.</span><span class="n">setCheckable</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">buttons_extract_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mark_point_button</span><span class="p">,</span><span class="n">alignment</span><span class="o">=</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignLeft</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">view_all_labels_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;View all labels&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">view_all_labels_button</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s2">&quot;background-color: rgb(102,102,102); color: white&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">view_all_labels_button</span><span class="o">.</span><span class="n">setFont</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">font_button</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">view_all_labels_button</span><span class="o">.</span><span class="n">setMaximumSize</span><span class="p">(</span><span class="mi">170</span><span class="p">,</span><span class="mi">30</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">view_all_labels_button</span><span class="o">.</span><span class="n">setMinimumSize</span><span class="p">(</span><span class="mi">170</span><span class="p">,</span><span class="mi">30</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">buttons_extract_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view_all_labels_button</span><span class="p">,</span><span class="n">alignment</span><span class="o">=</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignLeft</span><span class="p">)</span>
        <span class="c1"># self.buttons_extract_layout.addSpacing(145)</span>
        <span class="n">top_widget</span><span class="o">=</span><span class="n">QWidget</span><span class="p">()</span>
        <span class="n">top_widget</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">buttons_extract_layout</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">top_widget</span><span class="p">)</span></div></div>



<div class="viewcode-block" id="Slider"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.Slider">[docs]</a><span class="k">class</span> <span class="nc">Slider</span><span class="p">(</span><span class="n">QtWidgets</span><span class="o">.</span><span class="n">QSlider</span><span class="p">):</span> <span class="c1"># Class creating a changed slider</span>
    <span class="sd">&quot;&quot;&quot;Unused . Reference code below in this class: https://stackoverflow.com/questions/52689047/moving-qslider-to-mouse</span>
<span class="sd">    -click-position</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1">#</span>
<div class="viewcode-block" id="Slider.mousePressEvent"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.Slider.mousePressEvent">[docs]</a>    <span class="k">def</span> <span class="nf">mousePressEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Slider</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">mousePressEvent</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
        <span class="c1"># if event.button() == Qt.LeftButton:</span>
        <span class="c1">#     val = self.pixelPosToRangeValue(event.pos())</span>
        <span class="c1">#     self.setValue(val)</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Slider.pixelPosToRangeValue"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.Slider.pixelPosToRangeValue">[docs]</a>    <span class="k">def</span> <span class="nf">pixelPosToRangeValue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
        <span class="k">pass</span></div></div>
        <span class="c1"># opt = QtWidgets.QStyleOptionSlider()</span>
        <span class="c1"># self.initStyleOption(opt)</span>
        <span class="c1"># gr = self.style().subControlRect(QtWidgets.QStyle.CC_Slider, opt, QtWidgets.QStyle.SC_SliderGroove, self)</span>
        <span class="c1"># sr = self.style().subControlRect(QtWidgets.QStyle.CC_Slider, opt, QtWidgets.QStyle.SC_SliderHandle, self)</span>
        <span class="c1">#</span>
        <span class="c1"># if self.orientation() == Qt.Horizontal:</span>
        <span class="c1">#     sliderLength = sr.width()</span>
        <span class="c1">#     sliderMin = gr.x()</span>
        <span class="c1">#     sliderMax = gr.right() - sliderLength + 1</span>
        <span class="c1"># else:</span>
        <span class="c1">#     sliderLength = sr.height()</span>
        <span class="c1">#     sliderMin = gr.y()</span>
        <span class="c1">#     sliderMax = gr.bottom() - sliderLength + 1;</span>
        <span class="c1"># pr = pos - sr.center() + sr.topLeft()</span>
        <span class="c1"># p = pr.x() if self.orientation() == Qt.Horizontal else pr.y()</span>
        <span class="c1"># return QtWidgets.QStyle.sliderValueFromPosition(self.minimum(), self.maximum(), p - sliderMin,</span>
        <span class="c1">#                                        sliderMax - sliderMin, opt.upsideDown)</span>


<div class="viewcode-block" id="score_sliders"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.score_sliders">[docs]</a><span class="k">class</span> <span class="nc">score_sliders</span><span class="p">(</span><span class="n">QVBoxLayout</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Initialises sliders for setting damage scores</span>

<span class="sd">    :param score_name: the name of the score, which will appear on top of the score widget</span>
<span class="sd">    :type score_name:  str</span>
<span class="sd">    :param damage_types: list of types of damage</span>
<span class="sd">    :type damage_types: list of str</span>
<span class="sd">    :param damage_ranges: list of tuples [(min1,max1),..,(minN,maxN)] where the first element of each tuples is the min</span>
<span class="sd">    value of</span>
<span class="sd">    the</span>
<span class="sd">    damage,</span>
<span class="sd">    and the secon element is the max value. Each element must be an int</span>
<span class="sd">    :type damage_ranges: list</span>
<span class="sd">    :param opt_kwargs: optional arguments for the formatting with keys &#39;label_minimum_width&#39;,&#39;tick_spacing&#39;,&#39;slider_gap&#39;</span>
<span class="sd">                        whose values are all ints</span>
<span class="sd">    :type opt_kwargs: dict</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">score_name</span><span class="o">=</span><span class="s1">&#39;Ratingen&#39;</span><span class="p">,</span><span class="n">damage_types</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Destruction&#39;</span><span class="p">,</span><span class="s1">&#39;Proliferation&#39;</span><span class="p">],</span><span class="n">damage_ranges</span><span class="o">=</span><span class="p">[(</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">),(</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">)],</span>
                 <span class="n">opt_kwargs</span><span class="o">=</span><span class="p">{}):</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">score_sliders</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">opt_kwargs</span> <span class="o">=</span> <span class="n">opt_kwargs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font_header</span> <span class="o">=</span> <span class="n">QFont</span><span class="p">(</span><span class="s1">&#39;Android Roboto&#39;</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font_subheader</span> <span class="o">=</span> <span class="n">QFont</span><span class="p">(</span><span class="s1">&#39;Android Roboto&#39;</span><span class="p">,</span> <span class="mi">13</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font_text</span> <span class="o">=</span> <span class="n">QFont</span><span class="p">(</span><span class="s1">&#39;Android Roboto&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font_button</span> <span class="o">=</span> <span class="n">QFont</span><span class="p">(</span><span class="s1">&#39;Android Roboto&#39;</span><span class="p">,</span> <span class="mi">11</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">score_name</span>    <span class="o">=</span> <span class="n">score_name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">damage_types</span>  <span class="o">=</span> <span class="n">damage_types</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">damage_ranges</span> <span class="o">=</span> <span class="n">damage_ranges</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sliders</span>       <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">init_sliders</span><span class="p">()</span>

<div class="viewcode-block" id="score_sliders.init_sliders"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.score_sliders.init_sliders">[docs]</a>    <span class="k">def</span> <span class="nf">init_sliders</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">min_label_width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">opt_kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;label_minimum_width&#39;</span><span class="p">,</span><span class="mi">110</span><span class="p">)</span>
        <span class="n">tick_spacing</span>    <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">opt_kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;tick_spacing&#39;</span><span class="p">,</span><span class="mi">30</span><span class="p">)</span>
        <span class="n">slider_gap</span>      <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">opt_kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;slider_gap&#39;</span><span class="p">,</span><span class="mi">130</span><span class="p">)</span>
        <span class="c1"># print(self.damage_types)</span>
        <span class="k">for</span> <span class="n">damage</span><span class="p">,</span><span class="n">rng</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">damage_types</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">damage_ranges</span><span class="p">):</span>
            <span class="n">layout</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
            <span class="c1"># print(damage)</span>
            <span class="n">label</span>  <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="n">damage</span><span class="p">)</span>
            <span class="n">label</span><span class="o">.</span><span class="n">setFont</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">font_text</span><span class="p">)</span>
            <span class="n">label</span><span class="o">.</span><span class="n">setMinimumWidth</span><span class="p">(</span><span class="n">min_label_width</span><span class="p">)</span>
            <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>

            <span class="n">slider_layout</span> <span class="o">=</span> <span class="n">QGridLayout</span><span class="p">()</span>
            <span class="n">score_slider</span>   <span class="o">=</span> <span class="n">Slider</span><span class="p">()</span>
            <span class="n">score_slider</span><span class="o">.</span><span class="n">setPageStep</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">score_slider</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s2">&quot;QSlider::handle:horizontal {background-color: #16CCB1;}&quot;</span><span class="p">)</span>
            <span class="n">score_slider</span><span class="o">.</span><span class="n">setOrientation</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">Horizontal</span><span class="p">)</span>
            <span class="n">score_slider</span><span class="o">.</span><span class="n">setRange</span><span class="p">(</span><span class="n">rng</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">rng</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">score_slider</span><span class="o">.</span><span class="n">setTickInterval</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">score_slider</span><span class="o">.</span><span class="n">setSingleStep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">slider_layout</span><span class="o">.</span><span class="n">setHorizontalSpacing</span><span class="p">(</span><span class="n">score_slider</span><span class="o">.</span><span class="n">tickInterval</span><span class="p">())</span>
            <span class="n">score_slider</span><span class="o">.</span><span class="n">setTickPosition</span><span class="p">(</span><span class="n">QSlider</span><span class="o">.</span><span class="n">TicksBelow</span><span class="p">)</span>



            <span class="n">slider_label_layout</span>  <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
            <span class="n">scores</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">rng</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">rng</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">score</span> <span class="ow">in</span> <span class="n">scores</span><span class="p">:</span>
                <span class="n">slider_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">QLabel</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">score</span><span class="p">)),</span><span class="mi">0</span><span class="p">,</span><span class="nb">int</span><span class="p">(</span><span class="n">score</span><span class="p">),</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignHCenter</span><span class="p">)</span>
            <span class="n">score_slider</span><span class="o">.</span><span class="n">setMinimumWidth</span><span class="p">(</span><span class="mi">300</span><span class="p">)</span>
            <span class="n">slider_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">score_slider</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">rng</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">rng</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignBottom</span><span class="p">)</span>

            <span class="c1"># slider_layout.addLayout(slider_label_layout)</span>

            <span class="n">hspacer</span> <span class="o">=</span> <span class="n">QSpacerItem</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span>
                                  <span class="n">QSizePolicy</span><span class="o">.</span><span class="n">Expanding</span><span class="p">,</span><span class="n">QSizePolicy</span><span class="o">.</span><span class="n">Minimum</span><span class="p">)</span>
            <span class="n">layout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">slider_layout</span><span class="p">)</span>
            <span class="n">layout</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">hspacer</span><span class="p">)</span>


            <span class="bp">self</span><span class="o">.</span><span class="n">sliders</span><span class="p">[</span><span class="n">damage</span><span class="p">]</span> <span class="o">=</span> <span class="n">score_slider</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span></div>


<div class="viewcode-block" id="score_sliders.reinit_values"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.score_sliders.reinit_values">[docs]</a>    <span class="k">def</span> <span class="nf">reinit_values</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">keys</span><span class="p">,</span><span class="n">val</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">sliders</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">val</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span></div>

<div class="viewcode-block" id="score_sliders.print_slider_values"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.score_sliders.print_slider_values">[docs]</a>    <span class="k">def</span> <span class="nf">print_slider_values</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">keys</span><span class="p">,</span><span class="n">val</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">sliders</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">val</span><span class="o">.</span><span class="n">value</span><span class="p">())</span></div>

<div class="viewcode-block" id="score_sliders.get_slider_values"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.score_sliders.get_slider_values">[docs]</a>    <span class="k">def</span> <span class="nf">get_slider_values</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">pass</span></div></div>



<div class="viewcode-block" id="make_buttons_from_list"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.make_buttons_from_list">[docs]</a><span class="k">def</span> <span class="nf">make_buttons_from_list</span><span class="p">(</span><span class="n">titles</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;L&#39;</span><span class="p">,</span><span class="s1">&#39;R&#39;</span><span class="p">,</span><span class="s1">&#39;N/A&#39;</span><span class="p">]):</span>
    <span class="n">groupBox</span> <span class="o">=</span> <span class="n">QButtonGroup</span><span class="p">()</span>
    <span class="c1"># groupBox.setCheckable(True)</span>
    <span class="c1"># groupBox.setChecked(True)</span>
    <span class="n">groupBox</span><span class="o">.</span><span class="n">setExclusive</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">button_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">title</span> <span class="ow">in</span> <span class="n">titles</span><span class="p">:</span>
        <span class="n">button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>

        <span class="c1"># button.setAutoExclusive(True)</span>
        <span class="n">button_list</span> <span class="o">+=</span> <span class="p">[</span><span class="n">button</span><span class="p">]</span>
        <span class="n">groupBox</span><span class="o">.</span><span class="n">addButton</span><span class="p">(</span><span class="n">button</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">groupBox</span><span class="p">,</span><span class="n">button_list</span></div>



<div class="viewcode-block" id="make_buttons_from_list_old"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.make_buttons_from_list_old">[docs]</a><span class="k">def</span> <span class="nf">make_buttons_from_list_old</span><span class="p">(</span><span class="n">titles</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;L&#39;</span><span class="p">,</span><span class="s1">&#39;R&#39;</span><span class="p">,</span><span class="s1">&#39;N/A&#39;</span><span class="p">]):</span>
    <span class="n">button_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">title</span> <span class="ow">in</span> <span class="n">titles</span><span class="p">:</span>
        <span class="n">button_list</span> <span class="o">+=</span> <span class="p">[</span><span class="n">QPushButton</span><span class="p">(</span><span class="n">title</span><span class="p">)]</span>
    <span class="k">return</span> <span class="n">button_list</span></div>


<div class="viewcode-block" id="BoxDistanceArea"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.BoxDistanceArea">[docs]</a><span class="k">class</span> <span class="nc">BoxDistanceArea</span><span class="p">(</span><span class="n">QLabel</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Unused</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">initUI</span><span class="p">()</span>

<div class="viewcode-block" id="BoxDistanceArea.initUI"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.BoxDistanceArea.initUI">[docs]</a>    <span class="k">def</span> <span class="nf">initUI</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Font settings</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font_header</span> <span class="o">=</span> <span class="n">QFont</span><span class="p">(</span><span class="s1">&#39;Android Roboto&#39;</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font_subheader</span> <span class="o">=</span> <span class="n">QFont</span><span class="p">(</span><span class="s1">&#39;Android Roboto&#39;</span><span class="p">,</span> <span class="mi">13</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font_text</span> <span class="o">=</span> <span class="n">QFont</span><span class="p">(</span><span class="s1">&#39;Android Roboto&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font_button</span> <span class="o">=</span> <span class="n">QFont</span><span class="p">(</span><span class="s1">&#39;Android Roboto&#39;</span><span class="p">,</span> <span class="mi">11</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">box</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;0&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">box</span><span class="o">.</span><span class="n">setContentsMargins</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">box</span><span class="o">.</span><span class="n">setFont</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">font_text</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">box</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span>
            <span class="s2">&quot;background-color: white; color: red; border-style: solid; border-width: 1px; border-color: red&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">box</span><span class="o">.</span><span class="n">setMaximumSize</span><span class="p">(</span><span class="mi">175</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">box</span><span class="o">.</span><span class="n">setMinimumSize</span><span class="p">(</span><span class="mi">175</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span></div>

<div class="viewcode-block" id="BoxDistanceArea.update_distance_box"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.BoxDistanceArea.update_distance_box">[docs]</a>    <span class="k">def</span> <span class="nf">update_distance_box</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scene</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">box</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">scene</span><span class="o">.</span><span class="n">get_distance</span><span class="p">(),</span> <span class="mi">2</span><span class="p">))</span> <span class="o">+</span> <span class="s2">&quot; mm&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="BoxDistanceArea.update_area_box"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.BoxDistanceArea.update_area_box">[docs]</a>    <span class="k">def</span> <span class="nf">update_area_box</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scene</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">box</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span> <span class="o">+</span> <span class="s2">&quot; sqmm&quot;</span><span class="p">)</span> <span class="c1"># todo: take in real area</span></div>


<div class="viewcode-block" id="BoxDistanceArea.add_to_layout"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.BoxDistanceArea.add_to_layout">[docs]</a>    <span class="k">def</span> <span class="nf">add_to_layout</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layout</span><span class="p">):</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">box</span><span class="p">,</span> <span class="n">alignment</span><span class="o">=</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignLeft</span><span class="p">)</span></div></div>




<div class="viewcode-block" id="SaveButton"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.SaveButton">[docs]</a><span class="k">class</span> <span class="nc">SaveButton</span><span class="p">(</span><span class="n">QPushButton</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Save&quot;</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">initUI</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">)</span>

<div class="viewcode-block" id="SaveButton.initUI"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.SaveButton.initUI">[docs]</a>    <span class="k">def</span> <span class="nf">initUI</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">title</span><span class="p">):</span>
        <span class="c1"># Font settings</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font_header</span> <span class="o">=</span> <span class="n">QFont</span><span class="p">(</span><span class="s1">&#39;Android Roboto&#39;</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font_subheader</span> <span class="o">=</span> <span class="n">QFont</span><span class="p">(</span><span class="s1">&#39;Android Roboto&#39;</span><span class="p">,</span> <span class="mi">13</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font_text</span> <span class="o">=</span> <span class="n">QFont</span><span class="p">(</span><span class="s1">&#39;Android Roboto&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font_button</span> <span class="o">=</span> <span class="n">QFont</span><span class="p">(</span><span class="s1">&#39;Android Roboto&#39;</span><span class="p">,</span> <span class="mi">11</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
        <span class="c1"># self.setStyleSheet(&quot;background-color: #16CCB1; color: white&quot;)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setFont</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">font_button</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setMaximumSize</span><span class="p">(</span><span class="mi">75</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setMinimumSize</span><span class="p">(</span><span class="mi">75</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span></div>

<div class="viewcode-block" id="SaveButton.add_to_layout"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.SaveButton.add_to_layout">[docs]</a>    <span class="k">def</span> <span class="nf">add_to_layout</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layout</span><span class="p">):</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alignment</span><span class="o">=</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignRight</span><span class="p">)</span></div>

<div class="viewcode-block" id="SaveButton.set_to_saved"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.SaveButton.set_to_saved">[docs]</a>    <span class="k">def</span> <span class="nf">set_to_saved</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Saved&quot;</span><span class="p">)</span>
        <span class="c1"># self.setStyleSheet(&quot;background-color: #CCCCCC; color: black&quot;)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setDisabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="SaveButton.restore_save_button"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.SaveButton.restore_save_button">[docs]</a>    <span class="k">def</span> <span class="nf">restore_save_button</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Save&quot;</span><span class="p">)</span>
        <span class="c1"># self.setStyleSheet(&quot;background-color: #16CCB1; color: white&quot;)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setDisabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span></div>

<div class="viewcode-block" id="SaveButton.restore_save_button_score"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.SaveButton.restore_save_button_score">[docs]</a>    <span class="k">def</span> <span class="nf">restore_save_button_score</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">save_score_flag</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Save&quot;</span><span class="p">)</span>
            <span class="c1"># self.setStyleSheet(&quot;background-color: #16CCB1; color: white&quot;)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setDisabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">save_score_flag</span> <span class="o">=</span> <span class="mi">0</span></div></div>


<span class="c1"># class leftLayout():</span>
<div class="viewcode-block" id="XRaySelectionMenu"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.XRaySelectionMenu">[docs]</a><span class="k">class</span> <span class="nc">XRaySelectionMenu</span><span class="p">(</span><span class="n">QWidget</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    class that handles the xray creation and the damage type selector</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">XRaySelectionMenu</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font_header</span> <span class="o">=</span> <span class="n">QFont</span><span class="p">(</span><span class="s1">&#39;Android Roboto&#39;</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font_subheader</span> <span class="o">=</span> <span class="n">QFont</span><span class="p">(</span><span class="s1">&#39;Android Roboto&#39;</span><span class="p">,</span> <span class="mi">13</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font_text</span> <span class="o">=</span> <span class="n">QFont</span><span class="p">(</span><span class="s1">&#39;Android Roboto&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font_button</span> <span class="o">=</span> <span class="n">QFont</span><span class="p">(</span><span class="s1">&#39;Android Roboto&#39;</span><span class="p">,</span> <span class="mi">11</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">temp_name</span>   <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">init_xray_creation_options</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">init_damage_selector</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect_buttons</span><span class="p">()</span>

<div class="viewcode-block" id="XRaySelectionMenu.init_xray_creation_options"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.XRaySelectionMenu.init_xray_creation_options">[docs]</a>    <span class="k">def</span> <span class="nf">init_xray_creation_options</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">study_layout</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">study_id_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Study ID&quot;</span><span class="p">)</span>
        <span class="n">study_id_label</span><span class="o">.</span><span class="n">setFont</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">font_text</span><span class="p">)</span>
        <span class="n">study_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">study_id_label</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># Number for relative size compared to other widgets</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">combobox_studyid</span> <span class="o">=</span> <span class="n">QComboBox</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">combobox_studyid</span><span class="o">.</span><span class="n">setFont</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">font_text</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">combobox_studyid</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span>
            <span class="s2">&quot;This displays the file study id to which the xray being viewed belongs. Use the dropdown to select another study from the working directory.&quot;</span><span class="p">)</span>
        <span class="n">study_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">combobox_studyid</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># Number for relative size compared to other widgets</span>
        <span class="n">studyWidget</span> <span class="o">=</span> <span class="n">QWidget</span><span class="p">()</span>
        <span class="n">studyWidget</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">study_layout</span><span class="p">)</span>

        <span class="n">xray_layout</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">xray_id_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Xray ID&quot;</span><span class="p">)</span>
        <span class="n">xray_id_label</span><span class="o">.</span><span class="n">setFont</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">font_text</span><span class="p">)</span>
        <span class="n">xray_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">xray_id_label</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># Number for relative size compared to other widgets</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">combobox_xrayid</span> <span class="o">=</span> <span class="n">QComboBox</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">combobox_xrayid</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="s2">&quot;This displays the file name of the xray being viewed. Use the dropdown to select another xray from the same study.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">combobox_xrayid</span><span class="o">.</span><span class="n">setFont</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">font_text</span><span class="p">)</span>
        <span class="n">xray_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">combobox_xrayid</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># Number for relative size compared to other widgets</span>
        <span class="n">xray_widget</span> <span class="o">=</span> <span class="n">QWidget</span><span class="p">()</span>
        <span class="n">xray_widget</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">xray_layout</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">studyWidget</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">xray_widget</span><span class="p">)</span>

        <span class="n">button_layout</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">new_study_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;+ New Study&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">new_study_button</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span>
            <span class="s2">&quot;QPushButton&quot;</span> <span class="s2">&quot;{&quot;</span> <span class="s2">&quot;background-color: rgb(102,102,102); color: white&quot;</span> <span class="s2">&quot;}&quot;</span> <span class="s2">&quot;QPushButton::pressed&quot;</span> <span class="s2">&quot;{&quot;</span>
            <span class="s2">&quot;background-color: #362699; color: white&quot;</span> <span class="s2">&quot;}&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">addXrayToStudy_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Add X-ray to Study&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addXrayToStudy_button</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="s2">&quot;Opens up the file dialog to allow the the user to select a new xray to add to the current study.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addXrayToStudy_button</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span>
            <span class="s2">&quot;QPushButton&quot;</span> <span class="s2">&quot;{&quot;</span> <span class="s2">&quot;background-color: rgb(102,102,102); color: white&quot;</span> <span class="s2">&quot;}&quot;</span> <span class="s2">&quot;QPushButton::pressed&quot;</span> <span class="s2">&quot;{&quot;</span>
            <span class="s2">&quot;background-color: #362699; color: white&quot;</span> <span class="s2">&quot;}&quot;</span><span class="p">)</span>
        <span class="n">button_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">new_study_button</span><span class="p">)</span>
        <span class="n">button_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">addXrayToStudy_button</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_wdir_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Change save location&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_wdir_button</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="s2">&quot;Changes the location where xrays and annotations are saved. If a location with a supported file structure is found, the app loads all the studies for the user.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_wdir_button</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span>
            <span class="s2">&quot;QPushButton&quot;</span> <span class="s2">&quot;{&quot;</span> <span class="s2">&quot;background-color: rgb(102,102,102); color: white&quot;</span> <span class="s2">&quot;}&quot;</span> <span class="s2">&quot;QPushButton::pressed&quot;</span> <span class="s2">&quot;{&quot;</span>
            <span class="s2">&quot;background-color: #362699; color: white&quot;</span> <span class="s2">&quot;}&quot;</span><span class="p">)</span>
        <span class="n">button_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">set_wdir_button</span><span class="p">)</span>

        <span class="n">layout3</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">wd_label</span>         <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Working Directory&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">wd_info</span>  <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wd_info</span><span class="o">.</span><span class="n">setReadOnly</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

        <span class="n">layout3</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">wd_label</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">layout3</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wd_info</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>


        <span class="n">layout4</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">file_label</span>         <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Current file&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">current_file_info</span>  <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_file_info</span><span class="o">.</span><span class="n">setReadOnly</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">current_study_info</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_study_info</span><span class="o">.</span><span class="n">setReadOnly</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

        <span class="n">layout4</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">file_label</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="c1"># layout4.addWidget(self.current_file_info, 2)</span>
        <span class="c1"># layout4.addWidget(self.c)</span>



        <span class="n">layout2</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">score_date_label</span>         <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Date&quot;</span><span class="p">)</span>
        <span class="n">score_organ_label</span>        <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Anatomical Structure&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xray_info_box_date</span>  <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xray_info_box_date</span><span class="o">.</span><span class="n">setReadOnly</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xray_info_box_date</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="s2">&quot;Shows the date of acquisition of the xray being viewed&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xray_info_box_organ</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">xray_info_box_organ</span><span class="o">.</span><span class="n">setReadOnly</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xray_info_box_organ</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="s2">&quot;Shows the name of the organ being displayed&quot;</span><span class="p">)</span>
        <span class="n">layout2</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">score_date_label</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">layout2</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xray_info_box_date</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">layout2</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">score_organ_label</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">layout2</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xray_info_box_organ</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>



        <span class="n">widget_wd</span> <span class="o">=</span> <span class="n">QWidget</span><span class="p">()</span>
        <span class="n">widget_wd</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">layout3</span><span class="p">)</span>
        <span class="n">widget_options</span> <span class="o">=</span> <span class="n">QWidget</span><span class="p">()</span>
        <span class="n">widget_options</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>
        <span class="n">widget_info</span>    <span class="o">=</span> <span class="n">QWidget</span><span class="p">()</span>
        <span class="n">widget_info</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">layout2</span><span class="p">)</span>
        <span class="n">widget_buttons</span> <span class="o">=</span> <span class="n">QWidget</span><span class="p">()</span>
        <span class="n">widget_buttons</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">button_layout</span><span class="p">)</span>
        <span class="n">widget_file</span> <span class="o">=</span> <span class="n">QWidget</span><span class="p">()</span>
        <span class="n">widget_file</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">layout4</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">widget_wd</span><span class="p">)</span>
        <span class="c1"># self.layout.addWidget(widget_file)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">widget_options</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">widget_info</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">widget_buttons</span><span class="p">)</span></div>



<div class="viewcode-block" id="XRaySelectionMenu.init_damage_selector"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.XRaySelectionMenu.init_damage_selector">[docs]</a>    <span class="k">def</span> <span class="nf">init_damage_selector</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">layout</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">score_id_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Scoring Method&quot;</span><span class="p">)</span>
        <span class="n">score_id_label</span><span class="o">.</span><span class="n">setFont</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">font_text</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">score_id_label</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">score_selector</span> <span class="o">=</span> <span class="n">QComboBox</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">score_selector</span><span class="o">.</span><span class="n">setFont</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">font_text</span><span class="p">)</span>
        <span class="c1"># self.score_selector.setStyleSheet(</span>
        <span class="c1">#     &quot;QPushButton&quot; &quot;{&quot; &quot;background-color: rgb(102,102,102); color: white&quot; &quot;}&quot; &quot;QPushButton::pressed&quot; &quot;{&quot;</span>
        <span class="c1">#     &quot;background-color: #362699; color: white&quot; &quot;}&quot;)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">score_selector</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
        <span class="n">widget</span> <span class="o">=</span> <span class="n">QWidget</span><span class="p">()</span>
        <span class="n">widget</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">widget</span><span class="p">)</span></div>


<div class="viewcode-block" id="XRaySelectionMenu.getDirectory"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.XRaySelectionMenu.getDirectory">[docs]</a>    <span class="k">def</span> <span class="nf">getDirectory</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">QFileDialog</span><span class="o">.</span><span class="n">getExistingDirectory</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">caption</span><span class="o">=</span><span class="s1">&#39;Select a folder&#39;</span><span class="p">,</span><span class="n">directory</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">wd_info</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>

        <span class="p">)</span>

        <span class="k">return</span> <span class="n">response</span></div>


<div class="viewcode-block" id="XRaySelectionMenu.getFiles"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.XRaySelectionMenu.getFiles">[docs]</a>    <span class="k">def</span> <span class="nf">getFiles</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">QFileDialog</span><span class="o">.</span><span class="n">getOpenFileName</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">caption</span><span class="o">=</span><span class="s1">&#39;Select a file&#39;</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">temp_name</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;file fed to xrayselectionmenu is&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">response</span></div>


<div class="viewcode-block" id="XRaySelectionMenu.change_wd"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.XRaySelectionMenu.change_wd">[docs]</a>    <span class="k">def</span> <span class="nf">change_wd</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getDirectory</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">response</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">wd_info</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">sep</span><span class="p">,</span><span class="n">response</span><span class="p">))</span></div>

<div class="viewcode-block" id="XRaySelectionMenu.add_xray_to_study"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.XRaySelectionMenu.add_xray_to_study">[docs]</a>    <span class="k">def</span> <span class="nf">add_xray_to_study</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">file</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getFiles</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">file</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">current_file_info</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">sep</span><span class="p">,</span><span class="n">file</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span></div>

<div class="viewcode-block" id="XRaySelectionMenu.create_new_study"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.XRaySelectionMenu.create_new_study">[docs]</a>    <span class="k">def</span> <span class="nf">create_new_study</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">file</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getFiles</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">file</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">current_study_info</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">sep</span><span class="p">,</span><span class="n">file</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span></div>

<div class="viewcode-block" id="XRaySelectionMenu.connect_buttons"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.XRaySelectionMenu.connect_buttons">[docs]</a>    <span class="k">def</span> <span class="nf">connect_buttons</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_wdir_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">change_wd</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addXrayToStudy_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">add_xray_to_study</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">new_study_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">create_new_study</span><span class="p">)</span></div></div>













<div class="viewcode-block" id="XrayDataCreationOptions"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.XrayDataCreationOptions">[docs]</a><span class="k">class</span> <span class="nc">XrayDataCreationOptions</span><span class="p">(</span><span class="n">QWidget</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Xray Annotation Creation&#39;</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">XrayDataCreationOptions</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font_header</span> <span class="o">=</span> <span class="n">QFont</span><span class="p">(</span><span class="s1">&#39;Android Roboto&#39;</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font_subheader</span> <span class="o">=</span> <span class="n">QFont</span><span class="p">(</span><span class="s1">&#39;Android Roboto&#39;</span><span class="p">,</span> <span class="mi">13</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font_text</span> <span class="o">=</span> <span class="n">QFont</span><span class="p">(</span><span class="s1">&#39;Android Roboto&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font_button</span> <span class="o">=</span> <span class="n">QFont</span><span class="p">(</span><span class="s1">&#39;Android Roboto&#39;</span><span class="p">,</span> <span class="mi">11</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span>      <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="c1"># text_file = open(&quot;config/joint_list.txt&quot;,&quot;r&quot;)</span>
        <span class="c1"># lines = text_file.readline().split(&#39;,&#39;)</span>
        <span class="c1"># text_file.close()</span>
        <span class="c1"># self.bones_joints_list = lines</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="p">)</span>


<div class="viewcode-block" id="XrayDataCreationOptions.init"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.XrayDataCreationOptions.init">[docs]</a>    <span class="k">def</span> <span class="nf">init</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">save_button</span> <span class="o">=</span> <span class="n">SaveButton</span><span class="p">()</span>
        <span class="c1"># self.save_button.add_to_layout(self.save_discard_layout)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">discard_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;X&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">discard_button</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s2">&quot;background-color: #FF6666; color: white&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">discard_button</span><span class="o">.</span><span class="n">setFont</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">font_button</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">discard_button</span><span class="o">.</span><span class="n">setMaximumSize</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="mi">30</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">discard_button</span><span class="o">.</span><span class="n">setMinimumSize</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="mi">30</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">qline_edits</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">input_box_layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">desc_box_layout</span>  <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;Acquisition Date&#39;</span><span class="p">,</span><span class="s1">&#39;Study id&#39;</span><span class="p">,</span><span class="s1">&#39;Body Part&#39;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">qline_edits</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">()</span>
            <span class="n">label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">desc_box_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">input_box_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">qline_edits</span><span class="p">[</span><span class="n">name</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">desc_box_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">save_button</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">input_box_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">discard_button</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">input_box_widget</span> <span class="o">=</span> <span class="n">QWidget</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">input_box_widget</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">input_box_layout</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">desc_box_widget</span> <span class="o">=</span> <span class="n">QWidget</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">desc_box_widget</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">desc_box_layout</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">desc_box_widget</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">input_box_widget</span><span class="p">)</span></div>


<div class="viewcode-block" id="XrayDataCreationOptions.init_save_discard"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.XrayDataCreationOptions.init_save_discard">[docs]</a>    <span class="k">def</span> <span class="nf">init_save_discard</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialises the Qpushbutton for save and discarding</span>
<span class="sd">        :return:</span>
<span class="sd">        :rtype:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_discard_layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_discard_layout</span><span class="o">.</span><span class="n">addSpacing</span><span class="p">(</span><span class="mi">290</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_button</span> <span class="o">=</span> <span class="n">SaveButton</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_button</span><span class="o">.</span><span class="n">add_to_layout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">save_discard_layout</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">discard_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;X&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">discard_button</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s2">&quot;background-color: #FF6666; color: white&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">discard_button</span><span class="o">.</span><span class="n">setFont</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">font_button</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">discard_button</span><span class="o">.</span><span class="n">setMaximumSize</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="mi">30</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">discard_button</span><span class="o">.</span><span class="n">setMinimumSize</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="mi">30</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_discard_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">discard_button</span><span class="p">,</span><span class="n">alignment</span><span class="o">=</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignRight</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_discard_widget</span> <span class="o">=</span> <span class="n">QWidget</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_discard_widget</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">save_discard_layout</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">save_discard_widget</span><span class="p">)</span></div>

<div class="viewcode-block" id="XrayDataCreationOptions.get_text"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.XrayDataCreationOptions.get_text">[docs]</a>    <span class="k">def</span> <span class="nf">get_text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">buttons</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the text on the button that is checked from a list of autoexclusive qpushbuttons</span>
<span class="sd">        :param buttons: Autoexlusive buttons</span>
<span class="sd">        :type buttons:</span>
<span class="sd">        :return:</span>
<span class="sd">        :rtype:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">for</span> <span class="n">button</span> <span class="ow">in</span> <span class="n">buttons</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">button</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
                <span class="n">text</span> <span class="o">=</span> <span class="n">button</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">text</span></div></div>


<div class="viewcode-block" id="XRayCreationWindow"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.XRayCreationWindow">[docs]</a><span class="k">class</span> <span class="nc">XRayCreationWindow</span><span class="p">(</span><span class="n">QMainWindow</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">XRayCreationWindow</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xray_creation_options</span> <span class="o">=</span> <span class="n">XrayDataCreationOptions</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setCentralWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xray_creation_options</span><span class="p">)</span></div>




<div class="viewcode-block" id="XrayDataCreationDialog"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.XrayDataCreationDialog">[docs]</a><span class="k">class</span> <span class="nc">XrayDataCreationDialog</span><span class="p">(</span><span class="n">QMessageBox</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">XrayDataCreationDialog</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Information</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Do you wish to create a score sheet for this x-ray?&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;Score Sheet Creation&quot;</span><span class="p">)</span>
        <span class="c1"># self.continue_button = self.addButton(QPushButton(&quot;Continue&quot;), QMessageBox.Yes,Q)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setStandardButtons</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Yes</span> <span class="o">|</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">No</span><span class="p">)</span>
        <span class="c1"># self.buttonClicked.connect(self.msgact_close)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">exec</span><span class="p">()</span></div>


<div class="viewcode-block" id="output_annotation_name"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.output_annotation_name">[docs]</a><span class="k">def</span> <span class="nf">output_annotation_name</span><span class="p">(</span><span class="n">level1_name</span> <span class="o">=</span><span class="s1">&#39;hand&#39;</span><span class="p">,</span><span class="n">level2_name</span><span class="o">=</span><span class="s1">&#39;R&#39;</span><span class="p">,</span><span class="n">level3_name</span><span class="o">=</span><span class="s1">&#39;MCP1&#39;</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">level1_name</span><span class="o">+</span><span class="s1">&#39;_&#39;</span><span class="o">+</span><span class="n">level2_name</span><span class="o">+</span><span class="s1">&#39;_&#39;</span><span class="o">+</span><span class="n">level3_name</span></div>



<div class="viewcode-block" id="update_dir"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.update_dir">[docs]</a><span class="k">def</span> <span class="nf">update_dir</span><span class="p">(</span><span class="n">nameInit</span><span class="p">):</span>
    <span class="n">output_directory</span> <span class="o">=</span> <span class="n">nameInit</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">output_directory</span><span class="p">):</span>
        <span class="n">output_directory</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output_directory</span><span class="p">,</span><span class="s1">&#39;1&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">highest_num</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">output_directory</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output_directory</span><span class="p">,</span> <span class="n">f</span><span class="p">)):</span>
                <span class="n">file_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">f</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">file_num</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">file_num</span> <span class="o">&gt;</span> <span class="n">highest_num</span><span class="p">:</span>
                        <span class="n">highest_num</span> <span class="o">=</span> <span class="n">file_num</span>
                <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The file name &quot;</span><span class="si">%s</span><span class="s1">&quot; is not an integer. Skipping&#39;</span> <span class="o">%</span> <span class="n">file_name</span><span class="p">)</span>

        <span class="n">output_directory</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output_directory</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">highest_num</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
    <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">output_directory</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">output_directory</span></div>

<span class="c1">#Class that loads the latest data stored in the csv file into a python array</span>
<div class="viewcode-block" id="XrayData"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.XrayData">[docs]</a><span class="k">class</span> <span class="nc">XrayData</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">image_name</span><span class="p">,</span><span class="n">xray_id</span><span class="p">,</span><span class="n">acquisition_date</span><span class="p">,</span><span class="n">save_loc</span><span class="o">=</span><span class="s1">&#39;saved_data&#39;</span><span class="p">,</span><span class="n">organ_name</span><span class="o">=</span><span class="s1">&#39;hand&#39;</span><span class="p">,</span><span class="n">meta_loc</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Main class</span>

<span class="sd">        :param image_name:</span>
<span class="sd">        :type image_name:</span>
<span class="sd">        :param xray_id:</span>
<span class="sd">        :type xray_id:</span>
<span class="sd">        :param acquisition_date:</span>
<span class="sd">        :type acquisition_date:</span>
<span class="sd">        :param save_loc:</span>
<span class="sd">        :type save_loc:</span>
<span class="sd">        :param organ_name:</span>
<span class="sd">        :type organ_name:</span>
<span class="sd">        :param meta_loc:</span>
<span class="sd">        :type meta_loc:</span>
<span class="sd">        &quot;&quot;&quot;</span>


        <span class="k">if</span> <span class="n">meta_loc</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xray_id</span>  <span class="o">=</span> <span class="n">xray_id</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">save_loc</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">save_loc</span><span class="p">,</span><span class="n">xray_id</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">meta_table</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;acquisition_date&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">acquisition_date</span><span class="p">],</span><span class="s1">&#39;xray_id&#39;</span><span class="p">:[</span><span class="n">xray_id</span><span class="p">],</span><span class="s1">&#39;organ&#39;</span><span class="p">:[</span><span class="n">organ_name</span><span class="p">],</span>
                               <span class="s1">&#39;file_name&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">image_name</span><span class="p">],</span> <span class="s1">&#39;image_quality&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">]}</span>


            <span class="k">for</span> <span class="nb">id</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;scores&#39;</span><span class="p">,</span><span class="s1">&#39;bone&#39;</span><span class="p">,</span><span class="s1">&#39;joint&#39;</span><span class="p">,</span><span class="s1">&#39;tissue&#39;</span><span class="p">]:</span>
                <span class="n">temp_loc</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">save_loc</span><span class="p">,</span><span class="nb">id</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">temp_loc</span><span class="p">,</span><span class="n">acquisition_date</span><span class="p">)):</span> <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">temp_loc</span><span class="p">,</span><span class="n">acquisition_date</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">save_metadata</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">init_from_meta</span><span class="p">(</span><span class="n">meta_loc</span><span class="p">)</span>



<div class="viewcode-block" id="XrayData.save_metadata"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.XrayData.save_metadata">[docs]</a>    <span class="k">def</span> <span class="nf">save_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">fileName</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">save_loc</span><span class="p">,</span><span class="s1">&#39;metadata.csv&#39;</span><span class="p">)</span>
        <span class="n">save_csv</span><span class="p">(</span><span class="n">mydict</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">meta_table</span><span class="p">,</span><span class="n">fileName</span><span class="o">=</span><span class="n">fileName</span><span class="p">)</span></div>
        <span class="c1"># df = pd.DataFrame(self.meta_table)</span>
        <span class="c1"># df.to_csv(os.path.join(self.save_loc,&#39;metadata.csv&#39;),index=False)</span>



<div class="viewcode-block" id="XrayData.add_xray"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.XrayData.add_xray">[docs]</a>    <span class="k">def</span> <span class="nf">add_xray</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">image_name</span><span class="p">,</span><span class="n">xray_id</span><span class="p">,</span><span class="n">acquisition_date</span><span class="p">,</span><span class="n">save_loc</span><span class="o">=</span><span class="s1">&#39;saved_data&#39;</span><span class="p">,</span><span class="n">organ_name</span><span class="o">=</span><span class="s1">&#39;hand&#39;</span><span class="p">):</span>
        <span class="c1"># self.meta_table = {&#39;acquisition_date&#39;:acquisition_date,&#39;xray_id&#39;:xray_id,&#39;organ&#39;:organ_name}</span>
        <span class="c1"># if type(self.meta_table) is pd.core.frame.DataFrame:</span>
        <span class="c1">#     meta_table = {}</span>
        <span class="c1">#     meta_table[&#39;acquisition_date&#39;] = np.append(self.meta_table[&#39;acquisition_date&#39;].to_numpy(),acquisition_date)</span>
        <span class="c1">#     meta_table[&#39;xray_id&#39;] = np.append(self.meta_table[&#39;xray_id&#39;].to_numpy(),</span>
        <span class="c1">#                                                     xray_id)</span>
        <span class="c1">#     meta_table[&#39;organ&#39;] = np.append(self.meta_table[&#39;organ&#39;].to_numpy(),</span>
        <span class="c1">#                                                     organ_name)</span>
        <span class="c1">#     meta_table[&#39;file_name&#39;] = np.append(self.meta_table[&#39;file_name&#39;].to_numpy(),</span>
        <span class="c1">#                                                     image_name)</span>
        <span class="c1">#     self.meta_table = pd.DataFrame(meta_table)</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">meta_table</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">meta_table</span><span class="p">[</span><span class="s1">&#39;acquisition_date&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">acquisition_date</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">meta_table</span><span class="p">[</span><span class="s1">&#39;xray_id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">xray_id</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">meta_table</span><span class="p">[</span><span class="s1">&#39;organ&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">organ_name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">meta_table</span><span class="p">[</span><span class="s1">&#39;file_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">image_name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">meta_table</span><span class="p">[</span><span class="s1">&#39;image_quality&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="c1"># self.meta_table = pd.DataFrame(self.meta_table)</span>
        <span class="k">for</span> <span class="nb">id</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;scores&#39;</span><span class="p">,</span><span class="s1">&#39;bone&#39;</span><span class="p">,</span><span class="s1">&#39;joint&#39;</span><span class="p">,</span><span class="s1">&#39;tissue&#39;</span><span class="p">]:</span>
            <span class="n">temp_loc</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">save_loc</span><span class="p">,</span><span class="nb">id</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">temp_loc</span><span class="p">,</span><span class="n">acquisition_date</span><span class="p">)):</span> <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span>
                <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">temp_loc</span><span class="p">,</span><span class="n">acquisition_date</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_metadata</span><span class="p">()</span></div>


<div class="viewcode-block" id="XrayData.save_bone_outline"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.XrayData.save_bone_outline">[docs]</a>    <span class="k">def</span> <span class="nf">save_bone_outline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">bone_id</span><span class="p">,</span><span class="n">date</span><span class="p">,</span><span class="n">plineItem</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        method to save the bone_outline</span>
<span class="sd">        :param bone_id:</span>
<span class="sd">        :param date:</span>
<span class="sd">        :param plineItem:</span>
<span class="sd">        :return:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">save_folder</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">save_loc</span><span class="p">,</span><span class="s1">&#39;bone&#39;</span><span class="p">)</span>
        <span class="n">save_folder</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">save_folder</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">date</span><span class="p">))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">save_folder</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">save_folder</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">bone_id</span><span class="p">)</span>
        <span class="n">filename</span>    <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">save_folder</span><span class="p">,</span><span class="n">bone_id</span><span class="o">+</span><span class="s1">&#39;.txt&#39;</span><span class="p">)</span>
        <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span><span class="n">plineItem</span><span class="o">.</span><span class="n">control_points</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output_confirmation</span><span class="p">(</span><span class="n">organ</span><span class="o">=</span><span class="n">bone_id</span><span class="p">,</span><span class="n">filename</span><span class="o">=</span><span class="n">filename</span><span class="p">)</span></div>

<div class="viewcode-block" id="XrayData.save_phantom_outline"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.XrayData.save_phantom_outline">[docs]</a>    <span class="k">def</span> <span class="nf">save_phantom_outline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">bone_id</span><span class="p">,</span><span class="n">date</span><span class="p">,</span><span class="n">plineItem</span><span class="p">):</span>
        <span class="n">save_folder</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">save_loc</span><span class="p">,</span><span class="s1">&#39;bone&#39;</span><span class="p">)</span>
        <span class="n">save_folder</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">save_folder</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">date</span><span class="p">))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">save_folder</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">save_folder</span><span class="p">)</span>
        <span class="n">filename</span>    <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">save_folder</span><span class="p">,</span><span class="n">bone_id</span><span class="o">+</span><span class="s1">&#39;.txt&#39;</span><span class="p">)</span>
        <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span><span class="n">plineItem</span><span class="o">.</span><span class="n">control_points</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output_confirmation</span><span class="p">(</span><span class="n">organ</span><span class="o">=</span><span class="n">bone_id</span><span class="p">,</span><span class="n">filename</span><span class="o">=</span><span class="n">filename</span><span class="p">)</span></div>

<div class="viewcode-block" id="XrayData.save_tissue_outline"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.XrayData.save_tissue_outline">[docs]</a>    <span class="k">def</span> <span class="nf">save_tissue_outline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">bone_id</span><span class="p">,</span><span class="n">date</span><span class="p">,</span><span class="n">plineItem</span><span class="p">):</span>
        <span class="n">save_folder</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">save_loc</span><span class="p">,</span><span class="s1">&#39;tissue&#39;</span><span class="p">)</span>
        <span class="n">save_folder</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">save_folder</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">date</span><span class="p">))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">save_folder</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">save_folder</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">bone_id</span><span class="p">)</span>
        <span class="n">filename</span>    <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">save_folder</span><span class="p">,</span><span class="n">bone_id</span><span class="o">+</span><span class="s1">&#39;.txt&#39;</span><span class="p">)</span>
        <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span><span class="n">plineItem</span><span class="o">.</span><span class="n">control_points</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output_confirmation</span><span class="p">(</span><span class="n">organ</span><span class="o">=</span><span class="n">bone_id</span><span class="p">,</span><span class="n">filename</span><span class="o">=</span><span class="n">filename</span><span class="p">)</span></div>

<div class="viewcode-block" id="XrayData.save_patch"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.XrayData.save_patch">[docs]</a>    <span class="k">def</span> <span class="nf">save_patch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">joint_id</span><span class="p">,</span><span class="n">date</span><span class="p">,</span><span class="n">rectItem</span><span class="p">):</span>
        <span class="n">save_folder</span> <span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">save_loc</span><span class="p">,</span><span class="s1">&#39;joint&#39;</span><span class="p">)</span>
        <span class="n">save_folder</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">save_folder</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">date</span><span class="p">))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">save_folder</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">save_folder</span><span class="p">)</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">save_folder</span><span class="p">,</span><span class="n">joint_id</span> <span class="o">+</span> <span class="s1">&#39;.txt&#39;</span><span class="p">)</span>
        <span class="n">bounding_points</span> <span class="o">=</span> <span class="n">rectItem</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">bounding_points</span>
        <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span><span class="n">bounding_points</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output_confirmation</span><span class="p">(</span><span class="n">organ</span><span class="o">=</span><span class="n">joint_id</span><span class="p">,</span><span class="n">filename</span><span class="o">=</span><span class="n">filename</span><span class="p">)</span></div>

<div class="viewcode-block" id="XrayData.save_landmark"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.XrayData.save_landmark">[docs]</a>    <span class="k">def</span> <span class="nf">save_landmark</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">landmark_id</span><span class="p">,</span><span class="n">date</span><span class="p">,</span><span class="n">plineItem</span><span class="p">):</span>
        <span class="n">save_folder</span> <span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">save_loc</span><span class="p">,</span><span class="s1">&#39;landmark&#39;</span><span class="p">)</span>
        <span class="n">save_folder</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">save_folder</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">date</span><span class="p">))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">save_folder</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">save_folder</span><span class="p">)</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">save_folder</span><span class="p">,</span><span class="n">landmark_id</span> <span class="o">+</span> <span class="s1">&#39;.txt&#39;</span><span class="p">)</span>
        <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span><span class="n">plineItem</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">control_points</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output_confirmation</span><span class="p">(</span><span class="n">organ</span><span class="o">=</span><span class="n">landmark_id</span><span class="p">,</span><span class="n">filename</span><span class="o">=</span><span class="n">filename</span><span class="p">)</span></div>

<div class="viewcode-block" id="XrayData.load_patches"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.XrayData.load_patches">[docs]</a>    <span class="k">def</span> <span class="nf">load_patches</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">save_folder</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">save_loc</span><span class="p">,</span><span class="s1">&#39;joint_patch&#39;</span><span class="p">)</span>

        <span class="n">my_lib</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">save_folder</span><span class="p">):</span>
            <span class="n">my_lib</span><span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">save_folder</span><span class="p">,</span><span class="n">f</span><span class="p">))</span></div>

<div class="viewcode-block" id="XrayData.load_outlines"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.XrayData.load_outlines">[docs]</a>    <span class="k">def</span> <span class="nf">load_outlines</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">save_folder</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">save_loc</span><span class="p">,</span><span class="s1">&#39;joint_patch&#39;</span><span class="p">)</span>

        <span class="n">my_lib</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">save_folder</span><span class="p">):</span>
            <span class="n">my_lib</span><span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">save_folder</span><span class="p">,</span><span class="n">f</span><span class="p">))</span></div>

<div class="viewcode-block" id="XrayData.init_from_meta"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.XrayData.init_from_meta">[docs]</a>    <span class="k">def</span> <span class="nf">init_from_meta</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">meta_loc</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        :param meta_loc: location pointing to the metadata.csv</span>
<span class="sd">        :return:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_loc</span> <span class="o">=</span> <span class="n">meta_loc</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">meta_table</span> <span class="o">=</span> <span class="n">load_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">meta_loc</span><span class="p">,</span><span class="s1">&#39;metadata.csv&#39;</span><span class="p">))</span></div>
        <span class="c1"># self.meta_table = pd.read_csv(os.path.join(meta_loc,&#39;metadata.csv&#39;))</span>
        <span class="c1"># self.meta_table = self.meta_table.to_dict()</span>

<div class="viewcode-block" id="XrayData.output_confirmation"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.XrayData.output_confirmation">[docs]</a>    <span class="k">def</span> <span class="nf">output_confirmation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">organ</span><span class="p">,</span><span class="n">filename</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;this is the method called when a file has been sucessfully saved,</span>
<span class="sd">        it should output the text in a message box</span>

<span class="sd">        :param organ:</span>
<span class="sd">        :type organ: str</span>
<span class="sd">        :param filename: filename pointing to where an anotation was saved</span>
<span class="sd">        :type filename: str</span>
<span class="sd">        :return:</span>
<span class="sd">        :rtype:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msg</span> <span class="o">=</span> <span class="n">QMessageBox</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Information</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Saved annotation under&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setInformativeText</span><span class="p">(</span><span class="n">organ</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setDetailedText</span><span class="p">(</span><span class="s2">&quot;Save location </span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">+</span><span class="n">filename</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">setStandardButtons</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Ok</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">show</span><span class="p">()</span></div></div>






<span class="c1">#extracts year,id and organ information from a saved filename</span>
<div class="viewcode-block" id="NameSignature"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.NameSignature">[docs]</a><span class="k">class</span> <span class="nc">NameSignature</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Class that retrives the year, patient id and organ from a filename which follows a particular naming convention.</span>

<span class="sd">    :param fileName: filename of the file. Needs to follow a particular naming convention. Currently supported are:</span>
<span class="sd">                     * **XPSA**: Concatenation of XPSA (X can be any alphabet), a 4 digit long patient id, either &#39;h&#39;</span>
<span class="sd">                     or &#39;f&#39;, followed by the year. Example: CPSA0003h2020. The information is extracted from the</span>
<span class="sd">                     filename</span>
<span class="sd">                    * **id-year-organ**: [id]_[year]_[organ] where organ is hands or feet. Extracts the info from the filename</span>
<span class="sd">                    * **.dcm**: Extrats the info from the dcm metadata</span>

<span class="sd">    :type fileName:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">fileName</span><span class="p">):</span>


        <span class="bp">self</span><span class="o">.</span><span class="n">year</span>  <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">organ</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">id</span>    <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">verify</span><span class="p">(</span><span class="n">fileName</span><span class="p">)</span>

<div class="viewcode-block" id="NameSignature.verify"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.NameSignature.verify">[docs]</a>    <span class="k">def</span> <span class="nf">verify</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">fileName</span><span class="p">):</span>

        <span class="n">fileName_</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">fileName</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>


        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">fileName_</span><span class="p">)</span><span class="o">==</span><span class="mi">13</span> <span class="ow">and</span> <span class="p">(</span><span class="n">fileName_</span><span class="p">[</span><span class="o">-</span><span class="mi">5</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;h&#39;</span> <span class="ow">or</span> <span class="n">fileName_</span><span class="p">[</span><span class="o">-</span><span class="mi">5</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;f&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">year</span>  <span class="o">=</span> <span class="n">fileName_</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">:]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">organ</span> <span class="o">=</span> <span class="s1">&#39;FEET&#39;</span> <span class="k">if</span> <span class="n">fileName_</span><span class="p">[</span><span class="o">-</span><span class="mi">5</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;f&#39;</span> <span class="k">else</span> <span class="s1">&#39;HANDS&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">id</span>    <span class="o">=</span> <span class="n">fileName_</span><span class="p">[:</span><span class="mi">8</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">fileName_</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">))</span><span class="o">==</span><span class="mi">3</span><span class="p">:</span>
            <span class="n">splits</span>     <span class="o">=</span> <span class="n">fileName_</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">year</span>  <span class="o">=</span> <span class="n">splits</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">organ</span> <span class="o">=</span> <span class="n">splits</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">id</span>    <span class="o">=</span> <span class="n">splits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">fileName</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;dcm&#39;</span><span class="p">:</span>
            <span class="n">dcm</span> <span class="o">=</span> <span class="n">pydicom</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">fileName</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">datestring</span> <span class="o">=</span> <span class="n">dcm</span><span class="o">.</span><span class="n">AcquisitionDate</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">year</span> <span class="o">=</span> <span class="n">datestring</span><span class="p">[</span><span class="mi">6</span><span class="p">:</span><span class="mi">8</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;-&#39;</span><span class="o">+</span><span class="n">datestring</span><span class="p">[</span><span class="mi">4</span><span class="p">:</span><span class="mi">6</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;-&#39;</span><span class="o">+</span><span class="n">datestring</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;cannot find acquisition date&quot;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">organ</span> <span class="o">=</span> <span class="n">dcm</span><span class="o">.</span><span class="n">BodyPartExamined</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;cannot find body part examined&quot;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">dcm</span><span class="o">.</span><span class="n">PatientID</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;cannot find patient id&quot;</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;case for such a filename nor created yet, please extend the class to&quot;</span><span class="p">)</span></div></div>



<div class="viewcode-block" id="XrayStudy"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.XrayStudy">[docs]</a><span class="k">class</span> <span class="nc">XrayStudy</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span><span class="c1">#todo: finish this class so I can initialise a study from a filename and load xrays</span>
    <span class="c1"># corresponding to the id of the root xray</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Class that loads up xrays corresponding to the same id from multiple locaytions and copies it to one aspax projects</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">filename</span><span class="p">,</span><span class="n">save_loc</span><span class="o">=</span><span class="s1">&#39;saved_data&#39;</span><span class="p">):</span>
        <span class="c1">#checking if this is an absolute path</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output_loc</span> <span class="o">=</span> <span class="n">save_loc</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">save_loc</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">save_loc</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;extracting id from the filename&#39;</span><span class="p">)</span>
            <span class="n">name_sig</span>   <span class="o">=</span> <span class="n">NameSignature</span><span class="p">(</span><span class="n">fileName</span><span class="o">=</span><span class="n">filename</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">id</span>    <span class="o">=</span> <span class="n">name_sig</span><span class="o">.</span><span class="n">id</span>
            <span class="n">year</span>       <span class="o">=</span> <span class="n">name_sig</span><span class="o">.</span><span class="n">year</span>
            <span class="n">organ_name</span> <span class="o">=</span> <span class="n">name_sig</span><span class="o">.</span><span class="n">organ</span>
            <span class="n">xray</span>       <span class="o">=</span> <span class="n">XrayData</span><span class="p">(</span><span class="n">image_name</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">filename</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span><span class="n">xray_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span><span class="n">acquisition_date</span><span class="o">=</span><span class="n">year</span><span class="p">,</span>
                                       <span class="n">organ_name</span><span class="o">=</span><span class="n">organ_name</span><span class="p">,</span><span class="n">save_loc</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">output_loc</span><span class="p">)</span>
            <span class="n">dest_loc</span>   <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">output_loc</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
            <span class="n">shutil</span><span class="o">.</span><span class="n">copyfile</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dest_loc</span><span class="p">,</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">filename</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">x_ray_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">xray</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">meta_data</span>  <span class="o">=</span> <span class="n">xray</span><span class="o">.</span><span class="n">meta_table</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;metatable initialised as&quot;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">meta_data</span><span class="p">)</span>

        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">filename</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">))</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;assuming that the filename is the id&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">filename</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">x_ray_list</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">meta_data</span> <span class="o">=</span> <span class="p">{}</span>


<div class="viewcode-block" id="XrayStudy.load_xrays_from_list"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.XrayStudy.load_xrays_from_list">[docs]</a>    <span class="k">def</span> <span class="nf">load_xrays_from_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">file_list</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">file_list</span><span class="p">:</span>

            <span class="c1">#            if f.split(&#39;/&#39;)[-1]!=self.meta_data[&#39;file_name&#39;][0]:</span>
            <span class="n">name_sig</span> <span class="o">=</span> <span class="n">NameSignature</span><span class="p">(</span><span class="n">fileName</span><span class="o">=</span><span class="n">f</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">name_sig</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
                <span class="n">year</span> <span class="o">=</span> <span class="n">name_sig</span><span class="o">.</span><span class="n">year</span>

                <span class="n">organ_name</span> <span class="o">=</span> <span class="n">name_sig</span><span class="o">.</span><span class="n">organ</span>
                <span class="n">xray</span> <span class="o">=</span> <span class="n">XrayData</span><span class="p">(</span><span class="n">image_name</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">f</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">xray_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">acquisition_date</span><span class="o">=</span><span class="n">year</span><span class="p">,</span>
                                <span class="n">organ_name</span><span class="o">=</span><span class="n">organ_name</span><span class="p">,</span> <span class="n">save_loc</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">output_loc</span><span class="p">)</span>
                <span class="n">dest_loc</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">output_loc</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>

                <span class="n">shutil</span><span class="o">.</span><span class="n">copyfile</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dest_loc</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">f</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">x_ray_list</span> <span class="o">+=</span> <span class="p">[</span><span class="n">xray</span><span class="p">]</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x_ray_list</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">meta_data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;acquisition_date&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">year</span><span class="p">],</span>
                                      <span class="s1">&#39;xray_id&#39;</span><span class="p">:</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">],</span>
                                      <span class="s1">&#39;organ&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">organ_name</span><span class="p">],</span>
                                      <span class="s1">&#39;file_name&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">f</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]],</span>
                                      <span class="s1">&#39;image_quality&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">]}</span>

                <span class="k">else</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;appending the metadata&#39;</span><span class="p">)</span>
                    <span class="c1"># dates    = self.meta_data[&#39;acquisition_date&#39;]</span>
                    <span class="c1"># xray_ids =</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">meta_data</span><span class="p">[</span><span class="s1">&#39;acquisition_date&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">year</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">meta_data</span><span class="p">[</span><span class="s1">&#39;xray_id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">meta_data</span><span class="p">[</span><span class="s1">&#39;organ&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">organ_name</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">meta_data</span><span class="p">[</span><span class="s1">&#39;file_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">f</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">meta_data</span><span class="p">[</span><span class="s1">&#39;image_quality&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">meta_data</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_metadata</span><span class="p">()</span></div>


<div class="viewcode-block" id="XrayStudy.load_xrays_from_loc"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.XrayStudy.load_xrays_from_loc">[docs]</a>    <span class="k">def</span> <span class="nf">load_xrays_from_loc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">loc</span><span class="p">):</span>
        <span class="c1">#todo: this method should find the xrays corresponding the the xray_id of the root xray and copy all the</span>
        <span class="c1"># xrays to tge save_loc</span>
        <span class="c1">#study_loc</span>
        <span class="c1">#--------&gt;/xray_id/xray1,xray2 etc</span>
        <span class="n">files</span>    <span class="o">=</span> <span class="p">[</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">loc</span><span class="p">,</span><span class="n">f</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">loc</span><span class="p">)</span> <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;jpg&#39;</span> <span class="ow">or</span> <span class="n">f</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;png&#39;</span> <span class="ow">or</span> <span class="n">f</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;dcm&#39;</span><span class="p">]</span>
        <span class="n">x_ray_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">load_xrays_from_list</span><span class="p">(</span><span class="n">files</span><span class="p">)</span></div>


<div class="viewcode-block" id="XrayStudy.save_metadata"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.XrayStudy.save_metadata">[docs]</a>    <span class="k">def</span> <span class="nf">save_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">fileloc</span>  <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">output_loc</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">fileloc</span><span class="p">,</span><span class="s1">&#39;metadata.csv&#39;</span><span class="p">)</span>
        <span class="n">save_csv</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">meta_data</span><span class="p">,</span><span class="n">fileName</span><span class="o">=</span><span class="n">filename</span><span class="p">)</span></div></div>







<div class="viewcode-block" id="find_unique_ids"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.find_unique_ids">[docs]</a><span class="k">def</span> <span class="nf">find_unique_ids</span><span class="p">(</span><span class="n">loc</span><span class="p">):</span>
    <span class="n">files</span> <span class="o">=</span> <span class="p">[</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">loc</span><span class="p">,</span><span class="n">f</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">loc</span><span class="p">)</span> <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;jpg&#39;</span> <span class="ow">or</span> <span class="n">f</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;png&#39;</span><span class="p">]</span>
    <span class="n">ids</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
        <span class="n">name_sig</span> <span class="o">=</span> <span class="n">NameSignature</span><span class="p">(</span><span class="n">fileName</span><span class="o">=</span><span class="n">f</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">ids</span> <span class="o">+=</span> <span class="p">[</span><span class="n">name_sig</span><span class="o">.</span><span class="n">id</span><span class="p">]</span>

    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">ids</span><span class="p">)</span></div>




<div class="viewcode-block" id="DictionaryTableModel"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.DictionaryTableModel">[docs]</a><span class="k">class</span> <span class="nc">DictionaryTableModel</span><span class="p">(</span><span class="n">QAbstractTableModel</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dictionary</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">DictionaryTableModel</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="o">=</span> <span class="n">dictionary</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">keys</span><span class="p">,</span><span class="n">val</span> <span class="ow">in</span> <span class="n">dictionary</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span> <span class="o">+=</span> <span class="p">[</span><span class="n">keys</span><span class="p">]</span>

        <span class="c1">#self.color_me()</span>

<div class="viewcode-block" id="DictionaryTableModel.data"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.DictionaryTableModel.data">[docs]</a>    <span class="k">def</span> <span class="nf">data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">role</span><span class="p">):</span>
        <span class="n">row</span> <span class="o">=</span> <span class="n">index</span><span class="o">.</span><span class="n">row</span><span class="p">()</span>
        <span class="n">col</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span><span class="p">[</span><span class="n">index</span><span class="o">.</span><span class="n">column</span><span class="p">()]</span>
        <span class="c1"># dt  = self._data[col].dtype</span>
        <span class="n">val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">[</span><span class="n">col</span><span class="p">][</span><span class="n">row</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">role</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">DisplayRole</span><span class="p">:</span>

                <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">role</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">BackgroundRole</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="nb">str</span><span class="p">:</span>

                <span class="k">return</span> <span class="n">QBrush</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="mi">255</span><span class="o">*</span><span class="n">val</span><span class="o">/</span><span class="mi">5</span><span class="p">,</span><span class="mi">255</span><span class="o">-</span><span class="mi">255</span><span class="o">*</span><span class="p">(</span><span class="n">val</span><span class="o">/</span><span class="mi">5</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span><span class="mi">255</span><span class="o">-</span><span class="mi">255</span><span class="o">*</span><span class="n">val</span><span class="o">/</span><span class="mi">5</span><span class="p">))</span></div>
            <span class="c1"># column = index.column()</span>
            <span class="c1"># column_key = self._headers[column]</span>
            <span class="c1"># return self._data[column_key][index.row()]</span>


<div class="viewcode-block" id="DictionaryTableModel.rowCount"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.DictionaryTableModel.rowCount">[docs]</a>    <span class="k">def</span> <span class="nf">rowCount</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="c1"># The length of the outer list.</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_headers</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span></div>

<div class="viewcode-block" id="DictionaryTableModel.columnCount"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.DictionaryTableModel.columnCount">[docs]</a>    <span class="k">def</span> <span class="nf">columnCount</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="c1"># The length of our headers.</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_headers</span><span class="p">)</span></div>

<div class="viewcode-block" id="DictionaryTableModel.headerData"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.DictionaryTableModel.headerData">[docs]</a>    <span class="k">def</span> <span class="nf">headerData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">section</span><span class="p">,</span> <span class="n">orientation</span><span class="p">,</span> <span class="n">role</span><span class="p">):</span>
        <span class="c1"># section is the index of the column/row.</span>
        <span class="k">if</span> <span class="n">role</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">DisplayRole</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">orientation</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Horizontal</span><span class="p">:</span>
                <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_headers</span><span class="p">[</span><span class="n">section</span><span class="p">])</span>

            <span class="k">if</span> <span class="n">orientation</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">Vertical</span><span class="p">:</span>
                <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">section</span><span class="p">)</span></div></div>



<div class="viewcode-block" id="StatusTableModel"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.StatusTableModel">[docs]</a><span class="k">class</span> <span class="nc">StatusTableModel</span><span class="p">(</span><span class="n">DictionaryTableModel</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dictionary</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">StatusTableModel</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">dictionary</span><span class="p">)</span>

<div class="viewcode-block" id="StatusTableModel.data"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.StatusTableModel.data">[docs]</a>    <span class="k">def</span> <span class="nf">data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">role</span><span class="p">):</span>
        <span class="n">num_cols</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">columnCount</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">row</span> <span class="o">=</span> <span class="n">index</span><span class="o">.</span><span class="n">row</span><span class="p">()</span>
        <span class="n">col</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span><span class="p">[</span><span class="n">index</span><span class="o">.</span><span class="n">column</span><span class="p">()]</span>
        <span class="c1"># dt  = self._data[col].dtype</span>
        <span class="n">val</span>  <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">[</span><span class="n">col</span><span class="p">][</span><span class="n">row</span><span class="p">]</span>
        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span>



        <span class="k">if</span> <span class="n">role</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">DisplayRole</span><span class="p">:</span>

                <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">role</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">BackgroundRole</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">col</span><span class="o">==</span><span class="s2">&quot;Area Name&quot;</span><span class="p">:</span>

                <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">float</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;Completed&quot;</span><span class="p">][</span><span class="n">row</span><span class="p">])</span> <span class="o">==</span><span class="mf">1.0</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">QBrush</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="mi">126</span><span class="p">,</span><span class="mi">249</span><span class="p">,</span><span class="mi">255</span><span class="p">))</span>
                <span class="k">elif</span> <span class="n">np</span><span class="o">.</span><span class="n">float</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;Not Completed&quot;</span><span class="p">][</span><span class="n">row</span><span class="p">])</span> <span class="o">==</span><span class="mf">1.0</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">QBrush</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">))</span>
                <span class="k">elif</span> <span class="n">np</span><span class="o">.</span><span class="n">float</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;Unsure&quot;</span><span class="p">][</span><span class="n">row</span><span class="p">])</span> <span class="o">==</span><span class="mf">1.0</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">QBrush</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="mi">250</span><span class="p">,</span> <span class="mi">160</span><span class="p">,</span> <span class="mi">160</span><span class="p">))</span></div></div>
            <span class="c1"># column = index.column()</span>
            <span class="c1"># column_key = self._headers[column]</span>
            <span class="c1"># return self._data[column_key][index.row()]</span>




<div class="viewcode-block" id="print_slider_values"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.print_slider_values">[docs]</a><span class="k">def</span> <span class="nf">print_slider_values</span><span class="p">(</span><span class="n">sliders</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">slider</span> <span class="ow">in</span> <span class="n">sliders</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">slider</span><span class="o">.</span><span class="n">value</span><span class="p">())</span></div>



<div class="viewcode-block" id="save_csv"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.save_csv">[docs]</a><span class="k">def</span> <span class="nf">save_csv</span><span class="p">(</span><span class="n">mydict</span><span class="p">,</span><span class="n">fileName</span><span class="p">):</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">vals</span>    <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span><span class="n">val</span> <span class="ow">in</span> <span class="n">mydict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">headers</span> <span class="o">+=</span> <span class="p">[</span><span class="n">key</span><span class="p">]</span>
        <span class="n">vals</span>    <span class="o">+=</span> <span class="p">[</span><span class="n">val</span><span class="p">]</span>

    <span class="n">N</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">vals</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">,</span><span class="n">newline</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="n">w</span><span class="o">.</span><span class="n">writerow</span><span class="p">(</span><span class="n">headers</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
            <span class="n">row</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">vals</span><span class="p">]</span>
            <span class="n">w</span><span class="o">.</span><span class="n">writerow</span><span class="p">(</span><span class="n">row</span><span class="p">)</span></div>


<div class="viewcode-block" id="load_csv"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.load_csv">[docs]</a><span class="k">def</span> <span class="nf">load_csv</span><span class="p">(</span><span class="n">fileName</span><span class="p">):</span>
    <span class="n">my_dict</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">infile</span><span class="p">:</span>
        <span class="n">reader</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">reader</span><span class="p">(</span><span class="n">infile</span><span class="p">)</span>
        <span class="n">row_count</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">reader</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">row_count</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
                <span class="n">keys</span> <span class="o">=</span> <span class="n">row</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">key</span><span class="p">,</span><span class="n">it</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span><span class="n">row</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">row_count</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
                        <span class="n">my_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">it</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">my_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">+=</span> <span class="p">[</span><span class="n">it</span><span class="p">]</span>
            <span class="n">row_count</span><span class="o">+=</span><span class="mi">1</span>


    <span class="k">return</span> <span class="n">my_dict</span></div>




<span class="kn">from</span> <span class="nn">PyQt5.QtCore</span> <span class="kn">import</span> <span class="n">QObject</span><span class="p">,</span> <span class="n">QSize</span><span class="p">,</span> <span class="n">QPointF</span><span class="p">,</span> <span class="n">QPropertyAnimation</span><span class="p">,</span> <span class="n">QEasingCurve</span><span class="p">,</span> <span class="n">pyqtProperty</span><span class="p">,</span> <span class="n">pyqtSlot</span><span class="p">,</span> <span class="n">Qt</span>
<span class="kn">from</span> <span class="nn">PyQt5.QtGui</span> <span class="kn">import</span>  <span class="n">QPainter</span><span class="p">,</span> <span class="n">QPalette</span><span class="p">,</span> <span class="n">QLinearGradient</span><span class="p">,</span> <span class="n">QGradient</span>
<span class="kn">from</span> <span class="nn">PyQt5.QtWidgets</span> <span class="kn">import</span> <span class="n">QAbstractButton</span><span class="p">,</span> <span class="n">QApplication</span><span class="p">,</span> <span class="n">QWidget</span><span class="p">,</span> <span class="n">QHBoxLayout</span><span class="p">,</span> <span class="n">QLabel</span>


<div class="viewcode-block" id="SwitchPrivate"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.SwitchPrivate">[docs]</a><span class="k">class</span> <span class="nc">SwitchPrivate</span><span class="p">(</span><span class="n">QObject</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">q</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">QObject</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="n">parent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mPointer</span> <span class="o">=</span> <span class="n">q</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mPosition</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mGradient</span> <span class="o">=</span> <span class="n">QLinearGradient</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mGradient</span><span class="o">.</span><span class="n">setSpread</span><span class="p">(</span><span class="n">QGradient</span><span class="o">.</span><span class="n">PadSpread</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">animation</span> <span class="o">=</span> <span class="n">QPropertyAnimation</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">animation</span><span class="o">.</span><span class="n">setTargetObject</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">animation</span><span class="o">.</span><span class="n">setPropertyName</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;position&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">animation</span><span class="o">.</span><span class="n">setStartValue</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">animation</span><span class="o">.</span><span class="n">setEndValue</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">animation</span><span class="o">.</span><span class="n">setDuration</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">animation</span><span class="o">.</span><span class="n">setEasingCurve</span><span class="p">(</span><span class="n">QEasingCurve</span><span class="o">.</span><span class="n">InOutExpo</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">animation</span><span class="o">.</span><span class="n">finished</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mPointer</span><span class="o">.</span><span class="n">update</span><span class="p">)</span>

    <span class="nd">@pyqtProperty</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">position</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">mPosition</span>

    <span class="nd">@position</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">position</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mPosition</span> <span class="o">=</span> <span class="n">value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mPointer</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

<div class="viewcode-block" id="SwitchPrivate.draw"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.SwitchPrivate.draw">[docs]</a>    <span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">painter</span><span class="p">):</span>
        <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mPointer</span><span class="o">.</span><span class="n">rect</span><span class="p">()</span>
        <span class="n">margin</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">height</span><span class="p">()</span><span class="o">/</span><span class="mi">10</span>
        <span class="n">shadow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mPointer</span><span class="o">.</span><span class="n">palette</span><span class="p">()</span><span class="o">.</span><span class="n">color</span><span class="p">(</span><span class="n">QPalette</span><span class="o">.</span><span class="n">Dark</span><span class="p">)</span>
        <span class="n">light</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mPointer</span><span class="o">.</span><span class="n">palette</span><span class="p">()</span><span class="o">.</span><span class="n">color</span><span class="p">(</span><span class="n">QPalette</span><span class="o">.</span><span class="n">Light</span><span class="p">)</span>
        <span class="n">button</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mPointer</span><span class="o">.</span><span class="n">palette</span><span class="p">()</span><span class="o">.</span><span class="n">color</span><span class="p">(</span><span class="n">QPalette</span><span class="o">.</span><span class="n">Button</span><span class="p">)</span>
        <span class="n">painter</span><span class="o">.</span><span class="n">setPen</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">NoPen</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">mGradient</span><span class="o">.</span><span class="n">setColorAt</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">shadow</span><span class="o">.</span><span class="n">darker</span><span class="p">(</span><span class="mi">130</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mGradient</span><span class="o">.</span><span class="n">setColorAt</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">light</span><span class="o">.</span><span class="n">darker</span><span class="p">(</span><span class="mi">130</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mGradient</span><span class="o">.</span><span class="n">setStart</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">height</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mGradient</span><span class="o">.</span><span class="n">setFinalStop</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">painter</span><span class="o">.</span><span class="n">setBrush</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mGradient</span><span class="p">)</span>
        <span class="n">painter</span><span class="o">.</span><span class="n">drawRoundedRect</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">height</span><span class="p">()</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">height</span><span class="p">()</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">mGradient</span><span class="o">.</span><span class="n">setColorAt</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">shadow</span><span class="o">.</span><span class="n">darker</span><span class="p">(</span><span class="mi">140</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mGradient</span><span class="o">.</span><span class="n">setColorAt</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">light</span><span class="o">.</span><span class="n">darker</span><span class="p">(</span><span class="mi">160</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mGradient</span><span class="o">.</span><span class="n">setStart</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mGradient</span><span class="o">.</span><span class="n">setFinalStop</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">height</span><span class="p">())</span>
        <span class="n">painter</span><span class="o">.</span><span class="n">setBrush</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mGradient</span><span class="p">)</span>
        <span class="n">painter</span><span class="o">.</span><span class="n">drawRoundedRect</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">adjusted</span><span class="p">(</span><span class="n">margin</span><span class="p">,</span> <span class="n">margin</span><span class="p">,</span> <span class="o">-</span><span class="n">margin</span><span class="p">,</span> <span class="o">-</span><span class="n">margin</span><span class="p">),</span> <span class="n">r</span><span class="o">.</span><span class="n">height</span><span class="p">()</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">height</span><span class="p">()</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">mGradient</span><span class="o">.</span><span class="n">setColorAt</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">button</span><span class="o">.</span><span class="n">darker</span><span class="p">(</span><span class="mi">130</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mGradient</span><span class="o">.</span><span class="n">setColorAt</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">button</span><span class="p">)</span>

        <span class="n">painter</span><span class="o">.</span><span class="n">setBrush</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mGradient</span><span class="p">)</span>

        <span class="n">x</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">height</span><span class="p">()</span><span class="o">/</span><span class="mf">2.0</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">mPosition</span><span class="o">*</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">width</span><span class="p">()</span><span class="o">-</span><span class="n">r</span><span class="o">.</span><span class="n">height</span><span class="p">())</span>
        <span class="n">painter</span><span class="o">.</span><span class="n">drawEllipse</span><span class="p">(</span><span class="n">QPointF</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">height</span><span class="p">()</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span> <span class="n">r</span><span class="o">.</span><span class="n">height</span><span class="p">()</span><span class="o">/</span><span class="mi">2</span><span class="o">-</span><span class="n">margin</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">height</span><span class="p">()</span><span class="o">/</span><span class="mi">2</span><span class="o">-</span><span class="n">margin</span><span class="p">)</span></div>

<div class="viewcode-block" id="SwitchPrivate.animate"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.SwitchPrivate.animate">[docs]</a>    <span class="nd">@pyqtSlot</span><span class="p">(</span><span class="nb">bool</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;animate&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">animate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">checked</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">animation</span><span class="o">.</span><span class="n">setDirection</span><span class="p">(</span><span class="n">QPropertyAnimation</span><span class="o">.</span><span class="n">Forward</span> <span class="k">if</span> <span class="n">checked</span> <span class="k">else</span> <span class="n">QPropertyAnimation</span><span class="o">.</span><span class="n">Backward</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">animation</span><span class="o">.</span><span class="n">start</span><span class="p">()</span></div></div>


<div class="viewcode-block" id="Switch"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.Switch">[docs]</a><span class="k">class</span> <span class="nc">Switch</span><span class="p">(</span><span class="n">QAbstractButton</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">QAbstractButton</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="n">parent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dPtr</span> <span class="o">=</span> <span class="n">SwitchPrivate</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setCheckable</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dPtr</span><span class="o">.</span><span class="n">animate</span><span class="p">)</span>

<div class="viewcode-block" id="Switch.sizeHint"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.Switch.sizeHint">[docs]</a>    <span class="k">def</span> <span class="nf">sizeHint</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">QSize</span><span class="p">(</span><span class="mi">84</span><span class="p">,</span> <span class="mi">42</span><span class="p">)</span></div>

<div class="viewcode-block" id="Switch.paintEvent"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.Switch.paintEvent">[docs]</a>    <span class="k">def</span> <span class="nf">paintEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="n">painter</span> <span class="o">=</span> <span class="n">QPainter</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">painter</span><span class="o">.</span><span class="n">setRenderHint</span><span class="p">(</span><span class="n">QPainter</span><span class="o">.</span><span class="n">Antialiasing</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dPtr</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">painter</span><span class="p">)</span></div>

<div class="viewcode-block" id="Switch.resizeEvent"><a class="viewcode-back" href="../menu_widgets.html#menu_widgets.Switch.resizeEvent">[docs]</a>    <span class="k">def</span> <span class="nf">resizeEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span></div></div>








<span class="k">if</span> <span class="vm">__name__</span><span class="o">==</span><span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="c1">#main()</span>
    <span class="c1"># xray_record = XrayData(image_name=&#39;CPSA0045h2012.png&#39;,xray_id=&#39;CPSA0045&#39;,acquisition_date=&#39;2012&#39;)</span>
    <span class="c1"># xray_record.add_xray(image_name=&#39;CPSA0045h2019.png&#39;,xray_id=&#39;CPSA0045&#39;,acquisition_date=&#39;2019&#39;,</span>
    <span class="c1">#  save_loc=&#39;saved_data&#39;,</span>
    <span class="c1">#  save_loc=&#39;saved_data&#39;,</span>
    <span class="c1">#  organ_name=&#39;hand&#39;)</span>
    <span class="c1">#</span>
    <span class="c1">#</span>
    <span class="c1"># loaded_record = XrayData(image_name=&#39;CPSA0045h2012.png&#39;,xray_id=&#39;CPSA0045&#39;,acquisition_date=&#39;2012&#39;,</span>
    <span class="c1">#                          meta_loc=xray_record.save_loc)</span>
    <span class="c1">#</span>
    <span class="kn">import</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">shutil</span>
    <span class="kn">import</span> <span class="nn">pydicom</span>
    <span class="n">dest_loc</span> <span class="o">=</span> <span class="s1">&#39;C:/Users/amr62/Documents/Monitor_aspax&#39;</span>
    <span class="n">src_loc</span>  <span class="o">=</span> <span class="s1">&#39;C:/Users/amr62/Documents/Monitor&#39;</span>
    <span class="n">folders</span> <span class="o">=</span> <span class="p">[</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">src_loc</span><span class="p">,</span><span class="n">f</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">src_loc</span><span class="p">)]</span>

    <span class="k">for</span> <span class="n">study_folder</span> <span class="ow">in</span> <span class="n">folders</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;--------------------------&quot;</span><span class="p">)</span>
        <span class="n">k</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">file_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">subfolder</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">study_folder</span><span class="p">):</span>

            <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">study_folder</span><span class="p">,</span><span class="n">subfolder</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">root</span><span class="p">,</span> <span class="n">dirs</span><span class="p">,</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>

                <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
                    <span class="n">file_list</span> <span class="o">+=</span> <span class="p">[</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">root</span><span class="p">,</span><span class="n">file</span><span class="p">)]</span>
            <span class="n">xray_record</span> <span class="o">=</span> <span class="n">XrayStudy</span><span class="p">(</span><span class="n">file_list</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">save_loc</span> <span class="o">=</span> <span class="n">dest_loc</span><span class="p">)</span>
            <span class="n">xray_record</span><span class="o">.</span><span class="n">load_xrays_from_list</span><span class="p">(</span><span class="n">file_list</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>


            <span class="c1">#</span>
            <span class="c1"># print(dicom)</span>
            <span class="c1"># if file_name.split(&#39;.&#39;)[-1]==&#39;dcm&#39;:</span>
            <span class="c1">#</span>
            <span class="c1">#     if k==0:</span>
            <span class="c1">#         xray_record = XrayStudy(file_name,save_loc=dest_loc)</span>
            <span class="c1">#     else:</span>
            <span class="c1">#         xray_record.load_xrays_from_loc(file_name)</span>
            <span class="c1">#     k+=1</span>


        <span class="c1"># for subfolder in os.listdir(study_folder):</span>
        <span class="c1">#     path = os.path.join(study_folder,subfolder)</span>
        <span class="c1">#     dicoms = [os.path.join(path,file) for file in os.listdir(path)]</span>
        <span class="c1">#</span>
        <span class="c1">#     for dicom in dicoms:</span>
        <span class="c1">#         # file = pydicom.read_file(dicom)</span>
        <span class="c1">#</span>
        <span class="c1">#         name_sig = NameSignature(dicom)</span>
        <span class="c1">#         id = name_sig.id</span>
        <span class="c1">#         target_folder = os.path.join(dest_loc,id)</span>
        <span class="c1">#         if not os.path.isdir(target_folder): os.makedirs(target_folder)</span>
        <span class="c1">#         shutil.copyfile(dicom,os.path.join(target_folder,dicom))</span>








    <span class="c1"># ids      = find_unique_ids(src_loc)</span>
    <span class="c1">#study    = XrayStudy</span>
    <span class="c1"># filename = &#39;/media/adwaye/2tb/data/xray_data/anonymised_backup/results/29471_2000_hands.jpg&#39;</span>
    <span class="c1"># #study    = XrayStudy(filename=filename,save_loc=dest_loc)</span>
    <span class="c1"># for id in ids:</span>
    <span class="c1">#     print(id)</span>
    <span class="c1">#     study     = XrayStudy(id,save_loc=dest_loc)</span>
    <span class="c1">#     study.load_xrays_from_loc(loc = src_loc)</span>

    <span class="c1"># import sys</span>
    <span class="c1"># app = QApplication(sys.argv)</span>
    <span class="c1"># w = Switch()</span>
    <span class="c1"># w.show()</span>
    <span class="c1"># sys.exit(app.exec_())</span>


































</pre></div>

           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2022, Adwaye Rambojun.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>